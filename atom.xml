<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>QuiryRain的博客</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://quiryrain.tk/"/>
  <updated>2019-04-16T02:31:58.819Z</updated>
  <id>http://quiryrain.tk/</id>
  
  <author>
    <name>QuiryRain</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Tensorflow知识总结</title>
    <link href="http://quiryrain.tk/190416-1/"/>
    <id>http://quiryrain.tk/190416-1/</id>
    <published>2019-04-16T02:30:52.000Z</published>
    <updated>2019-04-16T02:31:58.819Z</updated>
    
    <content type="html"><![CDATA[<h3 id="消除过拟合的方法"><a href="#消除过拟合的方法" class="headerlink" title="消除过拟合的方法"></a>消除过拟合的方法</h3><ul><li>L1正则化   绝对值</li><li>L2正则化  平方</li><li>L3正则化  立方</li><li>L4正则化  4次方</li><li>dropout</li></ul><p>其中对图像的处理过程一般为:<br>输入 – &gt; 卷积 – &gt; 池化 –&gt; 卷积 –&gt; 池化 –&gt; 消除过拟合 –&gt;全连接层 – &gt; 全连接层 –&gt; 分类</p><p>max_pool函数的作用是降低系统的复杂度，其中pooling分为最大池化和平均值池化</p><h3 id="线性回归"><a href="#线性回归" class="headerlink" title="线性回归"></a>线性回归</h3><p>线性回归的目标是找到一个与训练数据最为吻合的线性函数。对于2D数据是找到一个与数据相吻合的线性函数<br>线性回归是一种找到最适合一组点的直线或超平面的方法</p><p>在卷积运算中，对图像降维是通过修改卷积核的strides（步长）参数进行降维的。</p><h3 id="卷积层"><a href="#卷积层" class="headerlink" title="卷积层"></a>卷积层</h3><p>单层CNN的实际用途是检测边缘。对于图像识别和分类任务而言，更常见的情形是使用不同的层类型支持某个卷积层。这些层有助于减少过拟合，并可加速训练过程和降低内存占用率。</p><p>tf.nn.depthwise_conv2d:将一个卷积层的输出连接到另一个卷积层的输入<br>tf.nn.separabel_conv2d:对于较大的模型，可保证在不牺牲准确率的前提下实现训练的加速。对于较小的模型，它能够快速收敛，但准确率较低。<br>tf.nn.conv2d_transpose:将一个卷积核应用于一个新的特征图，后者的每一部分都填充了与卷积核相同的值。当该卷积核遍历新图像时，任何重叠的部分都相加在一起。</p><h3 id="激活函数"><a href="#激活函数" class="headerlink" title="激活函数"></a>激活函数</h3><p>为神经网络引入非线性</p><p>在CNN中最常用的激活函数：<br>tf.nn.relu:<br>Relu是分段线性的。当输入为非负数时，输出与输入相同。当输入为负数时，输出均为0.<br>优点：不受梯度消失的影响，取值范围为[0,++]<br>缺点：当使用较大的学习速率时，易受达到饱和的神经元的影响。</p><p>tf.sigmoid:<br>sigmoid函数的返回值位于区间[0.0, 1.0]中。当输入值较大时，tf.sigmoid将返回一个接近于1.0的值，而输入值较小时，返回值将接近于0.0</p><p>tf.tanh:<br>双曲正切函数(tanh)与tf.sigmoid非常接近，且后者具有类似的优缺点。tf.tanh函数的值域为[-1.0, 1.0]</p><p>tf.nn.dropout:<br>依据某个可配置的概率将输出设为0.0.为学习到的输出添加少量噪声。</p><p>梯度是偏导数的矢量<br>Pandas 是用于进行数据分析和建模的重要库</p><ul><li>张量(Tensor)：是对高维数据的一种抽象式表达<br> Tensorflow张量是什么？</li><li>张量时用来表示多维数据的</li><li>张量时执行操作时的输入或输出数据</li><li>用户通过执行操作来创建或计算张量</li><li>张量的形状不一定在编译时确定，可以在运行时通过形状推断计算得出。</li></ul><p>会话是什么?<br>会话提供了估算张量和执行操作的运行环境，它是发放计算任务的客户端，所有计算任务都由它连接的执行引擎完成。</p><p>会话执行:</p><ul><li>估算张量(Tensor.eval)</li><li>执行操作(Operation.run)</li><li>会话执行(Session.run)</li></ul><p>会话执行原理：<br>调用sess.run(tain_op)语句执行训练操作时：</p><ul><li>首先，程序内部提取操作依赖的所有前置操作。这些操作的节点共同组成了一副子图</li><li>然后，程序将子图中的计算节点、存储节点和数据节点按照各自的执行设备分类。相同设备上的节点组成了一副局部图</li><li>最后，每个设备上的局部图在实际执行时，根据节点间的依赖关系将各个节点有序的加载到设备上执行。</li></ul><p>优化算法：<br>典型的机器学习和深度学习问题通常都需要转换为最优化问题进行求解。</p><p>求解最优化的问题的算法成为优化算法，他们通常采用迭代方式实现：首先设定一个初始的可行解。然后基于特定的函数反复重新计算可行解，直到找到一个最优解或达到预设的收敛条件。</p><p>不同的优化算法采用的迭代策略各有不同：</p><ul><li>有的使用目标函数的一阶导数，如梯度下降法</li><li>二阶导数，如牛顿法</li><li>前几轮迭代的信息，如Adam</li></ul><p>优化器是实现优化算法的载体：<br>一次典型的迭代优化应该分为以下3个步骤：</p><ul><li>计算梯度： 调用compute_gradients方法</li><li>处理梯度： 用户按照自己需求处理梯度值，如梯度裁剪和梯度加权等</li><li>应用梯度： 调用apply_grandients方法，将处理后的梯度值应用到模型参数  </li></ul><p>Loss下降方法：</p><ul><li>随机梯度下降</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;消除过拟合的方法&quot;&gt;&lt;a href=&quot;#消除过拟合的方法&quot; class=&quot;headerlink&quot; title=&quot;消除过拟合的方法&quot;&gt;&lt;/a&gt;消除过拟合的方法&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;L1正则化   绝对值&lt;/li&gt;
&lt;li&gt;L2正则化  平方&lt;/li&gt;
&lt;li&gt;
      
    
    </summary>
    
      <category term="Tensorflow" scheme="http://quiryrain.tk/categories/Tensorflow/"/>
    
    
      <category term="Tensorflow" scheme="http://quiryrain.tk/tags/Tensorflow/"/>
    
  </entry>
  
  <entry>
    <title>Tensorflow的基础学习和资料</title>
    <link href="http://quiryrain.tk/190416/"/>
    <id>http://quiryrain.tk/190416/</id>
    <published>2019-04-16T00:44:34.000Z</published>
    <updated>2019-04-16T02:37:44.547Z</updated>
    
    <content type="html"><![CDATA[<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><h3 id="以下内容为测试内容"><a href="#以下内容为测试内容" class="headerlink" title="以下内容为测试内容"></a>以下内容为测试内容</h3><blockquote><p>以下内容未测试内容</p></blockquote><p>中文测试</p><p>再次测试</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;测试&quot;&gt;&lt;a href=&quot;#测试&quot; class=&quot;headerlink&quot; title=&quot;测试&quot;&gt;&lt;/a&gt;测试&lt;/h3&gt;&lt;h3 id=&quot;以下内容为测试内容&quot;&gt;&lt;a href=&quot;#以下内容为测试内容&quot; class=&quot;headerlink&quot; title=&quot;以下内容为测试
      
    
    </summary>
    
      <category term="Tensorflow" scheme="http://quiryrain.tk/categories/Tensorflow/"/>
    
      <category term="机器学习" scheme="http://quiryrain.tk/categories/Tensorflow/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="Tensorflow" scheme="http://quiryrain.tk/tags/Tensorflow/"/>
    
      <category term="机器学习" scheme="http://quiryrain.tk/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="资料" scheme="http://quiryrain.tk/tags/%E8%B5%84%E6%96%99/"/>
    
  </entry>
  
  <entry>
    <title>有些人走着走着就散了</title>
    <link href="http://quiryrain.tk/181118/"/>
    <id>http://quiryrain.tk/181118/</id>
    <published>2019-03-01T01:41:48.000Z</published>
    <updated>2019-03-05T13:32:48.675Z</updated>
    
    <content type="html"><![CDATA[<script src=/js/crypto-js.js></script><script>function doDecrypt (pwd, onError) {console.log('in doDecrypt');const txt = document.getElementById('enc_content').innerHTML;let plantext;try {const bytes = CryptoJS.AES.decrypt(txt, pwd);var plaintext = bytes.toString(CryptoJS.enc.Utf8);} catch(err) {if(onError) {onError(err);}return;}document.getElementById('enc_content').innerHTML = plaintext;document.getElementById('enc_content').style.display = 'block';document.getElementById('enc_passwd').style.display = 'none';if(typeof MathJax !== 'undefined') {MathJax.Hub.Queue(['resetEquationNumbers', MathJax.InputJax.TeX],['PreProcess', MathJax.Hub],['Reprocess', MathJax.Hub]);}}</script><div id="enc_content" style="display:none">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</div><div id="enc_passwd"> <input id="enc_pwd_input" type="password" style="border-radius: 5px;border-style: groove;height: 30px;width: 50%;cursor: auto;font-size: 102%;color: currentColor;outline: none;text-overflow: initial;padding-left: 5px;" onkeydown="if (event.keyCode == 13) { decrypt(); return false;}"> <input type="submit" value="解&nbsp;密" onclick="decrypt()" style="width: 58px;height: 34px;border-radius: 5px;background-color: white;border-style: solid;color: currentColor;"><div id="enc_error" style="display: inline-block;color: #d84527;margin-left: 10px"></div><script>var onError = function(error) {document.getElementById("enc_error").innerHTML = "password error!"};function decrypt() {var passwd = document.getElementById("enc_pwd_input").value;console.log(passwd);doDecrypt(passwd, onError);}</script></div>]]></content>
    
    <summary type="html">
    
      早知道是这样 像梦一场 我才不会把爱都放在同一个地方
    
    </summary>
    
      <category term="往事回廊" scheme="http://quiryrain.tk/categories/%E5%BE%80%E4%BA%8B%E5%9B%9E%E5%BB%8A/"/>
    
    
      <category term="一场梦" scheme="http://quiryrain.tk/tags/%E4%B8%80%E5%9C%BA%E6%A2%A6/"/>
    
  </entry>
  
  <entry>
    <title>使用tkinter进行图片的遍历显示</title>
    <link href="http://quiryrain.tk/190228/"/>
    <id>http://quiryrain.tk/190228/</id>
    <published>2019-02-28T10:06:46.000Z</published>
    <updated>2019-03-05T13:32:48.677Z</updated>
    
    <content type="html"><![CDATA[<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>最近因为要写个GUI的内容，需要用到图像的遍历显示，因为没有办法,所以就自行摸索着开始写一个循环显示的TK。最终算是不符所望吧，勉强写出来一个，以此做下记录，便于下次使用。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageTk, Image</span><br><span class="line"><span class="keyword">import</span> glob, time</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">filenames = glob.glob(<span class="string">'sysImages/*'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">autoQuit</span><span class="params">()</span>:</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    root.quit()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> filename <span class="keyword">in</span> filenames:</span><br><span class="line">    root = tk.Tk()</span><br><span class="line"></span><br><span class="line">    img = Image.open(filename)</span><br><span class="line">    photo = ImageTk.PhotoImage(img)</span><br><span class="line">    label = tk.Label(image=photo)</span><br><span class="line">    label.image = photo</span><br><span class="line">    label.pack()</span><br><span class="line"></span><br><span class="line">    t = threading.Thread(target=autoQuit)</span><br><span class="line">    t.start()</span><br><span class="line">    root.mainloop()</span><br><span class="line">    root.destroy()</span><br></pre></td></tr></table></figure><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;原因&quot;&gt;&lt;a href=&quot;#原因&quot; class=&quot;headerlink&quot; title=&quot;原因&quot;&gt;&lt;/a&gt;原因&lt;/h3&gt;&lt;p&gt;最近因为要写个GUI的内容，需要用到图像的遍历显示，因为没有办法,所以就自行摸索着开始写一个循环显示的TK。最终算是不符所望吧，勉强写出来一
      
    
    </summary>
    
      <category term="Python杂记" scheme="http://quiryrain.tk/categories/Python%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="tkinter" scheme="http://quiryrain.tk/tags/tkinter/"/>
    
      <category term="遍历图片" scheme="http://quiryrain.tk/tags/%E9%81%8D%E5%8E%86%E5%9B%BE%E7%89%87/"/>
    
  </entry>
  
  <entry>
    <title>使用Python实现贪心算法</title>
    <link href="http://quiryrain.tk/180113/"/>
    <id>http://quiryrain.tk/180113/</id>
    <published>2019-02-26T03:14:50.000Z</published>
    <updated>2019-03-05T13:32:48.673Z</updated>
    
    <content type="html"><![CDATA[<p>题目： 圣诞节来临了，在城市A中，圣诞老人准备分发糖果。现在有多箱不同的糖果，每一种糖果都有自己的价值和重量。每箱糖果都可以拆分成任意散装组合带走。圣诞老人的驯鹿最多只能承受一定重量的糖果。请问圣诞老人最多能带走多大价值的糖果。</p><p>输入数据： 输入的第一行由两个部分组成，分别为糖果箱数正整数n(1&lt;=n&lt;=100)，驯鹿能承受的最大重量正整数w(0&lt;w&lt;10000)；其余n行每行对应一箱糖果，由两部分正整数v和w组成，分别为一箱糖果的价值和重量。</p><p>输出要求： 输出圣诞老人能带走的糖果的最大总价值，保留一位小数，输出为一行。</p><p>输出样例： </p><table><thead><tr><th style="text-align:left"></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">4</td><td style="text-align:left">15</td></tr><tr><td style="text-align:left">100</td><td style="text-align:left">4</td></tr><tr><td style="text-align:left">412</td><td style="text-align:left">8</td></tr><tr><td style="text-align:left">266</td><td style="text-align:left">7</td></tr><tr><td style="text-align:left">591</td><td style="text-align:left">2</td></tr></tbody></table><p>输出样例:</p><p>　1193.0</p><p>注：此处并没有按照这样的格式进行输入。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"></span><br><span class="line">input_a = raw_input(<span class="string">u'箱数:'</span>)</span><br><span class="line">input_b = raw_input(<span class="string">u'最大承受重量:'</span>)</span><br><span class="line"></span><br><span class="line">list_c = []</span><br><span class="line">list_z = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,int(input_a)+<span class="number">1</span>):</span><br><span class="line">    input_c = raw_input(<span class="string">'第'</span>+str(i)+<span class="string">'箱的总价值:'</span>)</span><br><span class="line">    input_d = raw_input(<span class="string">'第'</span>+str(i)+<span class="string">'箱的重量:'</span>)</span><br><span class="line">    avg = round(int(input_c)/int(input_d),<span class="number">1</span>)<span class="comment">#每一箱，重量为1的价值</span></span><br><span class="line">    list_c.append(avg)<span class="comment">#添加到列表，用于之后做比较</span></span><br><span class="line">    list_z.append([int(input_d),avg,<span class="number">0</span>])<span class="comment">#此处列表中添加列表，中间的列表一个存放总重量，第二个存放单位价值，第三个存放是否该物品已被取走</span></span><br><span class="line"></span><br><span class="line">list_c.sort(reverse=<span class="literal">True</span>) <span class="comment"># 降序排序</span></span><br><span class="line">sum =[<span class="number">0</span>,<span class="number">0</span>]<span class="comment"># 用于存放取走的总重量，第一个参数是取走的重量，第二个是超出前的备份</span></span><br><span class="line">num =<span class="number">0</span></span><br><span class="line">ji = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(list_c)):</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> range(len(list_z)):</span><br><span class="line">        <span class="keyword">if</span> ji == <span class="number">0</span>:<span class="comment">#做是否超出马车最大承受量的标记，未超出为0</span></span><br><span class="line">            <span class="keyword">if</span> (list_c[i] == list_z[k][<span class="number">1</span>]) <span class="keyword">and</span> (list_z[k][<span class="number">2</span>]==<span class="number">0</span>):</span><br><span class="line">                sum[<span class="number">1</span>] = sum[<span class="number">0</span>]<span class="comment">#备份</span></span><br><span class="line">                sum[<span class="number">0</span>] = sum[<span class="number">0</span>] + list_z[k][<span class="number">0</span>]<span class="comment">#取走的重量</span></span><br><span class="line">                v = list_z[k][<span class="number">0</span>]<span class="comment">#取走的重量</span></span><br><span class="line">                <span class="keyword">if</span> sum[<span class="number">0</span>] &gt; int(input_b):<span class="comment">#如果所有取走的重量超出马车的重量，就依次减少一单元的重量</span></span><br><span class="line">                    ji = <span class="number">1</span><span class="comment">#超出为1</span></span><br><span class="line">                    t= list_z[k][<span class="number">0</span>]</span><br><span class="line">                    <span class="keyword">while</span> <span class="literal">True</span>:<span class="comment">#依次减去单位1的重量</span></span><br><span class="line">                        z = sum[<span class="number">1</span>] + t<span class="comment">#使用备份进行判断，此时取走的数量已经大于最大承受量了</span></span><br><span class="line">                        <span class="keyword">if</span> z &lt;= int(input_b):</span><br><span class="line">                            <span class="keyword">break</span></span><br><span class="line">                        t = t<span class="number">-1</span></span><br><span class="line">                    v=t<span class="comment">#等于最大承受量时，价值较大的一件物品应取走的数量</span></span><br><span class="line">                    sum[<span class="number">0</span>]=sum[<span class="number">1</span>]<span class="comment">#从备份恢复</span></span><br><span class="line">                    sum[<span class="number">0</span>] = sum[<span class="number">0</span>] + t<span class="comment">#此时为真正的取走数量</span></span><br><span class="line">                num = list_c[i]*v + num<span class="comment">#总价值</span></span><br><span class="line">                list_z[k][<span class="number">2</span>] = <span class="number">1</span><span class="comment">#取走的标记</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">u'能带走的糖果的最大价值为:'</span>,num</span><br></pre></td></tr></table></figure><p>实现的效果图(此处用两组数据进行测试)：<br>第一组数据：<br><img src="/userImages/tanxin1.png" alt="测试结果1"></p><p>第二组数据：<br><img src="/userImages/tanxin2.png" alt="测试结果2"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;题目： 圣诞节来临了，在城市A中，圣诞老人准备分发糖果。现在有多箱不同的糖果，每一种糖果都有自己的价值和重量。每箱糖果都可以拆分成任意散装组合带走。圣诞老人的驯鹿最多只能承受一定重量的糖果。请问圣诞老人最多能带走多大价值的糖果。&lt;/p&gt;
&lt;p&gt;输入数据： 输入的第一行由两个
      
    
    </summary>
    
      <category term="Python杂记" scheme="http://quiryrain.tk/categories/Python%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="贪心算法" scheme="http://quiryrain.tk/tags/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>使用Python实现的杨辉三角</title>
    <link href="http://quiryrain.tk/171222/"/>
    <id>http://quiryrain.tk/171222/</id>
    <published>2019-02-26T03:10:30.000Z</published>
    <updated>2019-03-05T13:32:48.672Z</updated>
    
    <content type="html"><![CDATA[<p>某日，闲来无事做，就尝试着用Python实现了下杨辉三角，以下使用Python2 实现的杨辉三角 </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">triangel</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">' '</span>*(<span class="number">20</span>*<span class="number">3</span>)+str(<span class="number">1</span>)             <span class="comment">#定义起始两行</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">' '</span>*(<span class="number">19</span>*<span class="number">3</span>)+str(<span class="number">1</span>)+<span class="string">' '</span>*<span class="number">5</span>+str(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>,<span class="number">21</span>):</span><br><span class="line">        <span class="keyword">if</span> i ==<span class="number">3</span>:</span><br><span class="line">            L = [<span class="number">1</span>,<span class="number">1</span>]       <span class="comment">#初始化第二行        </span></span><br><span class="line">        L1 = []</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">2</span>,i):</span><br><span class="line">            z = L[i-j<span class="number">-1</span>]+L[i-j] <span class="comment"># 通过上一行构建下一层数据</span></span><br><span class="line">            L1.append(z)        <span class="comment"># 将数据添加到一个空列表中</span></span><br><span class="line">        L = [<span class="number">1</span>]       <span class="comment"># 再次对L初始化</span></span><br><span class="line">        L.extend(L1)    <span class="comment"># 将两个列表合并</span></span><br><span class="line">        L.append(<span class="number">1</span>)     <span class="comment"># 在L列表中添加最后一个数据“1”</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 以下内容为杨辉三角的打印</span></span><br><span class="line">        t = <span class="string">' '</span>*((<span class="number">21</span>-i)*<span class="number">3</span>)+str(<span class="number">1</span>)   <span class="comment"># 每次循环进行初始化每列的第一个数据1</span></span><br><span class="line">        <span class="keyword">for</span> h <span class="keyword">in</span> range(<span class="number">1</span>,len(L)):   <span class="comment"># 以下为构建每列的除一个数据外的其他数据，</span></span><br><span class="line">            <span class="keyword">if</span> L[h]&lt;<span class="number">10</span>:             <span class="comment"># 如果数据小于10，就是其前面5个空格，如果</span></span><br><span class="line">                t = t + <span class="string">' '</span>*<span class="number">5</span>+str(L[h]) <span class="comment">#数据小于100，就减少一个空格，依次类推，</span></span><br><span class="line">            <span class="keyword">elif</span> L[h] &lt;<span class="number">100</span>:         <span class="comment"># 直至剩余一个空格，用于分辨相邻的数据</span></span><br><span class="line">                t = t+<span class="string">' '</span>*<span class="number">4</span>+str(L[h])</span><br><span class="line">            <span class="keyword">elif</span> L[h] &lt; <span class="number">1000</span>:</span><br><span class="line">                t = t + <span class="string">' '</span>*<span class="number">3</span>+str(L[h])</span><br><span class="line">            <span class="keyword">elif</span> L[h] &lt; <span class="number">10000</span>:</span><br><span class="line">                t = t + <span class="string">' '</span>*<span class="number">2</span>+str(L[h])</span><br><span class="line">            <span class="keyword">elif</span> L[h] &lt; <span class="number">100000</span>:</span><br><span class="line">                t = t + <span class="string">' '</span>*<span class="number">1</span>+str(L[h])</span><br><span class="line">        <span class="keyword">print</span> t</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    triangel()</span><br></pre></td></tr></table></figure><p><img src="/userImages/yanghuisanjiao.png" alt="杨辉三角"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;某日，闲来无事做，就尝试着用Python实现了下杨辉三角，以下使用Python2 实现的杨辉三角 &lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;li
      
    
    </summary>
    
      <category term="Python杂记" scheme="http://quiryrain.tk/categories/Python%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="杨辉三角" scheme="http://quiryrain.tk/tags/%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92/"/>
    
  </entry>
  
  <entry>
    <title>使用chromedriver实现豆瓣网页的全网页截图</title>
    <link href="http://quiryrain.tk/190108/"/>
    <id>http://quiryrain.tk/190108/</id>
    <published>2019-02-26T02:48:23.000Z</published>
    <updated>2019-03-05T13:32:48.676Z</updated>
    
    <content type="html"><![CDATA[<p>最近由于工作需要，需要对部分网站进行全文截屏。在网上搜了很久没有搜出好的方法，而且在新版的selenium中已经不在支持PhantomJS了，所以全文截取变得有点棘手。</p><p>此处给出一个简单的方法，以20行代码实现<code>selenium+chromedriver+python</code>实现豆瓣的全文截取。  </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">options = webdriver.ChromeOptions()</span><br><span class="line">options.add_argument(<span class="string">'--headless'</span>)</span><br><span class="line">options.add_argument(<span class="string">'--dns-prefetch-disable'</span>)</span><br><span class="line">options.add_argument(<span class="string">'--no-referrers'</span>)</span><br><span class="line">options.add_argument(<span class="string">'--disable-gpu'</span>)</span><br><span class="line">options.add_argument(<span class="string">'--disable-audio'</span>)</span><br><span class="line">options.add_argument(<span class="string">'--no-sandbox'</span>)</span><br><span class="line">options.add_argument(<span class="string">'--ignore-certificate-errors'</span>)</span><br><span class="line">options.add_argument(<span class="string">'--allow-insecure-localhost'</span>)</span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome(options=options)</span><br><span class="line">driver.get(<span class="string">'http://www.douban.com'</span>)</span><br><span class="line">width = driver.execute_script(</span><br><span class="line">        <span class="string">"return Math.max(document.body.scrollWidth, document.body.offsetWidth, document.documentElement.clientWidth, document.documentElement.scrollWidth, document.documentElement.offsetWidth);"</span>)</span><br><span class="line">height = driver.execute_script(</span><br><span class="line">        <span class="string">"return Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight);"</span>)</span><br><span class="line">driver.set_window_size(width + <span class="number">100</span>, height + <span class="number">100</span>)</span><br><span class="line">driver.save_screenshot(<span class="string">'douban.png'</span>)</span><br><span class="line">driver.close()</span><br></pre></td></tr></table></figure><p><img src="/userImages/doubanjieping.png" alt="豆瓣全屏截取"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近由于工作需要，需要对部分网站进行全文截屏。在网上搜了很久没有搜出好的方法，而且在新版的selenium中已经不在支持PhantomJS了，所以全文截取变得有点棘手。&lt;/p&gt;
&lt;p&gt;此处给出一个简单的方法，以20行代码实现&lt;code&gt;selenium+chromedriv
      
    
    </summary>
    
      <category term="Python后端" scheme="http://quiryrain.tk/categories/Python%E5%90%8E%E7%AB%AF/"/>
    
    
      <category term="Chromedriver" scheme="http://quiryrain.tk/tags/Chromedriver/"/>
    
      <category term="全页面截屏" scheme="http://quiryrain.tk/tags/%E5%85%A8%E9%A1%B5%E9%9D%A2%E6%88%AA%E5%B1%8F/"/>
    
  </entry>
  
  <entry>
    <title>MongoEngine所使用的操作符</title>
    <link href="http://quiryrain.tk/171220/"/>
    <id>http://quiryrain.tk/171220/</id>
    <published>2019-02-26T02:41:13.000Z</published>
    <updated>2019-03-05T13:32:48.672Z</updated>
    
    <content type="html"><![CDATA[<h3 id="什么是MongoEngine？"><a href="#什么是MongoEngine？" class="headerlink" title="什么是MongoEngine？"></a>什么是MongoEngine？</h3><blockquote><p>MongoEngine是基于Python的对象系统设计的MongoDB专用的ORM框架。与SQLAlchemy不同的是，MongoEngine会自动生成一个唯一的标识，用ID属性表示。当然MongoEngine与SQLAlchemy还有很对不同的地方，比如字段类型等。</p></blockquote><h3 id="MongoEngine所支持的部分操作符"><a href="#MongoEngine所支持的部分操作符" class="headerlink" title="MongoEngine所支持的部分操作符"></a>MongoEngine所支持的部分操作符</h3><blockquote><p>操作符的表示形式为:加在关键字后面使用”<strong>+操作符”(此处是两个” _ “),例如：publish_data</strong>gt </p></blockquote><ul><li>ne：不等于</li><li>lt：小于</li><li>lte：小于或等于</li><li>gt：大于</li><li>gte：大于或等于</li><li>not：对一个操作符取否，例如publish_data__not__gt</li><li>in：值在列表中</li><li>nin：值不在列表中</li><li>mod：值%a==b,a和b用(a,b)的方式传递</li><li>all：列表中的所有值都在该字段中</li><li>size：列表的大小</li><li>existes：在该字段中存在这个值</li></ul><h3 id="检测字符串的部分操作符"><a href="#检测字符串的部分操作符" class="headerlink" title="检测字符串的部分操作符"></a>检测字符串的部分操作符</h3><ul><li>exact：字符串相等</li><li>iexact：字符串相等（大小写不敏感）</li><li>contains：字符串包含该值</li><li>icontains：字符串包含该值（大小写不敏感）</li><li>startswith：字符串以该值开始</li><li>istartswith：字符串以该值开始（大小写不敏感）</li><li>endswith：字符串以该值结束</li><li>iendswith：字符串以该值结束（大小写不敏感）</li></ul><h3 id="可以对字段值进行修改的操作符"><a href="#可以对字段值进行修改的操作符" class="headerlink" title="可以对字段值进行修改的操作符"></a>可以对字段值进行修改的操作符</h3><ul><li>set：设置一个值</li><li>unset：删除一个值</li><li>inc：将值自增</li><li>dec：将值自减</li><li>push：把一个值加到列表的末尾</li><li>push_all：把几个值加到列表的末尾</li><li>pop：移除列表中的第一个或者是最后一个值</li><li>pull：移除列表中的值</li><li>pull_all：移除列表中的几个值</li><li>add_to_set：当且晋档某值不在列表中时，将其添加进列表</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;什么是MongoEngine？&quot;&gt;&lt;a href=&quot;#什么是MongoEngine？&quot; class=&quot;headerlink&quot; title=&quot;什么是MongoEngine？&quot;&gt;&lt;/a&gt;什么是MongoEngine？&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Mongo
      
    
    </summary>
    
      <category term="Python后端" scheme="http://quiryrain.tk/categories/Python%E5%90%8E%E7%AB%AF/"/>
    
    
      <category term="Mongo" scheme="http://quiryrain.tk/tags/Mongo/"/>
    
      <category term="操作符" scheme="http://quiryrain.tk/tags/%E6%93%8D%E4%BD%9C%E7%AC%A6/"/>
    
  </entry>
  
  <entry>
    <title>一场说走就走的旅行</title>
    <link href="http://quiryrain.tk/180428/"/>
    <id>http://quiryrain.tk/180428/</id>
    <published>2019-02-26T02:28:35.000Z</published>
    <updated>2019-03-05T13:32:48.674Z</updated>
    
    <content type="html"><![CDATA[<p>时光荏苒，岁月如梭，大学里总需要一场说走就走的旅行。或为了心中的她，也或为了自己。</p><blockquote><p>那是一个早晨，我错过了末班车，却没有错过你</p></blockquote><p>人们总说“时间是个好东西，它能让你放下原来放不下的、看淡你原来看不淡的”。或许这就是一种成长吧，建立在原来的痛苦、喜悦之上的成长。<br>在那个时候我很庆幸没有错过你，虽然现在错过了，也没有什么后悔的，因为总需要一场说走就走的旅行。这场旅行无关你我，而是我必须要走的路，或许是我和他人，但我没有想到会是和你。因为这是一场说走就走永不相见的旅行。有些人走着走着就散了说的就是这个道理吧！  </p><blockquote><p>那年我们都很年轻，我们只是两条相交线，很幸运的在某一点相遇了，只是没有想到这个交叉点的停留时间是六年</p></blockquote><p>这场旅行是我一个人走的，因为没有你。路上有很多的美景，但是总觉得少点什么，即使看着这美景，也无心观赏，虽人在观景，但心思却飞向了那个两个月之前。之所以不是现在，是因为现在你让我找不到原谅的理由，也不可能会再相遇。因为我不想再步入那座让我伤心的城市，让我伤心欲绝的城市。<br>这场旅行是我一个人走的，因为花开了。坐在火车窗前观望着窗外的景色，发现窗外遍野的油菜花开了，开的很美、很鲜艳，让人赏心悦目的那种美。不过可惜的是火车并没有因此而停足，而是萧萧而过，窗前的我却开始回忆那种遍野油菜花的美。<br>这场旅行是我一个人走的，因为我不得不一个人走。这场说走就走的旅行是场艰辛的旅行，但是这场旅行也使我有了新的理解，并不是所有都是我想怎么就怎么的，现实不会因为我而改变，但是我却会因为这个现实而改变。或许这就是我场旅行的意义吧。  </p><blockquote><p>月台中总有太多的不舍，但终究还是不得不放开</p></blockquote><p>这场旅行中我见了很多新的事物。在原来没有时间去开始这场说走就走的旅行之前，我的世界是狭小的，之后我的世界是广阔的。一场忐忑的旅行，只是没有太多的如果，只有唯一的结果。<br>在这场旅行中虽然是艰辛的，收获也算是有的，但是也有疲惫，疲惫的是在这场旅行开始之前的忐忑，收获的是我彻底可以好好看看这个世界了。或许当我再次看到那片油菜田时，能够认真欣赏，好好珍惜这短瞬即逝的美。<br>纸短情长又如何，回忆终究只是回忆，生活还是要继续的。  </p><blockquote><p>旅行结束后，我有了很多的时间去看这个世界了。</p></blockquote><p>也许会在某个美丽的地方再次相遇，也许会永不相遇。太多的放不下终究还是放下了。繁华的世界，流逝的美，这场旅行归来后，我变回了原来的自己，只是多了旅行路途中的辛苦和收获。  </p><blockquote><p>后记</p></blockquote><p> “好久不见！”<br> “好久不见！”</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;时光荏苒，岁月如梭，大学里总需要一场说走就走的旅行。或为了心中的她，也或为了自己。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;那是一个早晨，我错过了末班车，却没有错过你&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;人们总说“时间是个好东西，它能让你放下原来放不下的、看淡你原来看
      
    
    </summary>
    
      <category term="往事回廊" scheme="http://quiryrain.tk/categories/%E5%BE%80%E4%BA%8B%E5%9B%9E%E5%BB%8A/"/>
    
    
      <category term="心灵洗涤" scheme="http://quiryrain.tk/tags/%E5%BF%83%E7%81%B5%E6%B4%97%E6%B6%A4/"/>
    
  </entry>
  
  <entry>
    <title>岁月静好</title>
    <link href="http://quiryrain.tk/180625/"/>
    <id>http://quiryrain.tk/180625/</id>
    <published>2019-02-25T09:08:01.000Z</published>
    <updated>2019-03-05T13:32:48.675Z</updated>
    
    <content type="html"><![CDATA[<h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><blockquote><p>故事的开始都很美好</p></blockquote><p>2015年9月2号，我来到了这所大学，虽然这所大学并不是很好的大学，但是这所大学却给了我很多记忆。<br>初入大学，总有太多的新鲜感，逛逛走走，时间总会匆匆而过。记得正式上课的第一天跑错了教室，不是我一人，而是我们整个班，现在想起来都很搞笑。<br>在那一年里，我有着自己的梦想，我期盼着自己的未来，因为我相信自己会过的更好。  </p><h3 id="悄悄"><a href="#悄悄" class="headerlink" title="悄悄"></a>悄悄</h3><blockquote><p>窗外的景色依旧燥热，有你时如此，无你时也是如此。</p></blockquote><p>我们有些时候总是悄悄的来，然后再悄悄的走开。人生中有很多的聚散，最后不过是风轻云淡。曾经我很爱很爱一个女孩，异地很痛苦，时刻想着她，后来也放下了。有时候人生啊，真的是悄悄的来，悄悄的走。大学四年里，我爱过就好，现在我已经习惯了一个人生活，回忆里和朋友坐在喧闹街市的路边摊，几瓶啤酒，一点小菜。聊起彼此曾经失败的感情，都在岁月变迁里逐渐释怀。胸膛上固守的温度总是会被南来北往的季风吹散，那些念念不忘的名字最后也被后来者取代。记住当时的日色，也未必能与你岁岁相守，彼此停留。  </p><h3 id="那一年"><a href="#那一年" class="headerlink" title="那一年"></a>那一年</h3><blockquote><p>记忆它总是慢慢的累积在我心中无法抹去</p></blockquote><p>那一年，我认识了你，一句半开玩笑的话，我们在一起了。时至今日，我依然记得当初说的那句玩笑话“要不你做我女朋友吧”，没错，就是这句，然后我们就在一起了，我开心的像个八百斤的胖子一样。之后的我做什么事都会为你想着，爱着你，宠着你，陪着你。只是后来 。。。 只是后来我们走散了。高中的生活中，你是我最美好的回忆，朋友羡慕着你我的感情，而我也认为我们会走到一起。那一年，《漂洋过海来看你》还很火，你对我说“我多想去见你”，因为那年我转到了另一所学校，在那所学校中我过着没有你的生活，殊不知我也很想见你，不善言表的我，不会更好的用语言来表达我对你的爱，而我却选择了为你默默付出。  </p><h3 id="也许，也许"><a href="#也许，也许" class="headerlink" title="也许，也许"></a>也许，也许</h3><blockquote><p>如果当初没有如果，现在的结局会不会不一样</p></blockquote><p>高考过后，我们去了两所不一样的学校，准确来说是我去了一所离你800多公里外的一所本科学校，而你却选择去了一所专科学校。也许这就注定了之后的结局吧。价值观不同，有时候很难走到一起。那时我们并没分开，而我也只在放假的时候才有空去找你，陪着你。繁忙的学业，时刻都会落后的技术，让我选择了我要给你更好的生活，而你选择的是要我时刻陪伴。大学上课时，手机成为了我们两个唯一交流的桥梁。整日看着手机，每当手机亮了我就知道是你给我发消息。时光蹉跎，岁月静好，三年里我们就是这样过去了，手机、放假后的陪伴。渐渐的我们都变了，17年，你去了你们那里做了一名幼教，你实习之前你问我“以后你养得起我吗”，我沉默了，是啊，我当时的能力能养你吗，我也问我自己，技术那么渣，我怎么去养你。我想了许久，我说“我养你”，后来我变了，变得想要为你我的生活做拼搏。我用实际行动做证明，但是我们却渐渐走散了，我想要给你我所拥有的最好的。接触的不同，价值观也就渐渐的改变了。  </p><h3 id="后来的我们"><a href="#后来的我们" class="headerlink" title="后来的我们"></a>后来的我们</h3><blockquote><p>美好的爱情大都相似，而不幸的爱情最后都成了故事，如果当时你没走，后来的我们会不会不一样? ——《后来的我们》</p></blockquote><p>后来，我们走散了。分手后的某一天，我突然知道你订了婚，要和别人去结婚了，我突然间觉得有我的世界都坍塌了。虽然我们分手了，我只是我没有想到你会选择那么早结婚。当我知道后的两天中，我彻夜未眠，听了两晚的《体面》。那天是过年后，朋友来找我喝酒，我大醉，醉的不省人事。虽然是醉的不省人事，但是我却记得关于你的话，我说“我想XXX”。那场感情上的坍塌，让我颓废了一星期，一星期之后，我选择了放下，彻彻底底的放下，手机和电脑里都删了关于你的一切。  </p><h3 id="如今"><a href="#如今" class="headerlink" title="如今"></a>如今</h3><blockquote><p>再见，曾经最爱的她。</p></blockquote><p>如今的我初入社会，离开了有太多记忆的学校。我为了自己的生活做着拼搏，不再是为了我们。<br><img src="/userImages/515.jpg" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;开始&quot;&gt;&lt;a href=&quot;#开始&quot; class=&quot;headerlink&quot; title=&quot;开始&quot;&gt;&lt;/a&gt;开始&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;故事的开始都很美好&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;2015年9月2号，我来到了这所大学，虽然这所大学并
      
    
    </summary>
    
      <category term="往事回廊" scheme="http://quiryrain.tk/categories/%E5%BE%80%E4%BA%8B%E5%9B%9E%E5%BB%8A/"/>
    
    
      <category term="Miss" scheme="http://quiryrain.tk/tags/Miss/"/>
    
  </entry>
  
  <entry>
    <title>玩命追一姑娘</title>
    <link href="http://quiryrain.tk/180623/"/>
    <id>http://quiryrain.tk/180623/</id>
    <published>2019-02-25T09:00:50.000Z</published>
    <updated>2019-03-05T13:32:48.674Z</updated>
    
    <content type="html"><![CDATA[<h3 id="玩命的追一姑娘"><a href="#玩命的追一姑娘" class="headerlink" title="玩命的追一姑娘"></a>玩命的追一姑娘</h3><p>和朋友们聚会，大家决定玩一个游戏。<br>找一个主题，然后讲一段自己的真实经历，看看谁的经历最有起承转合，最催泪，最奇葩，或者最让人无语凝噎，想抄家伙。<br>最后我们选定了一个主题——你有没有玩命爱一个姑娘。<br>这个问题抛出来的时候，大家都沉默了，纷纷在记忆中寻找那一段为了姑娘、为了爱情玩命的激情岁月。<br>在座的男士们，有的已经结婚，有的有了女朋友，有的还是一如既往的单身狗。<br>在大家都沉默的片刻，四张点了根烟，说：“我的故事都到了嗓子眼了，我先说吧。”<br>我笑而不语，等着四张的下文。  </p><p>四张并没有四十岁。<br>我们二十来岁认识的时候，大家就管他叫四张了。<br>当时，我们都在山东上大学。<br>四张有个青梅竹马的女朋友叫何玉。<br>据四张说，自己和何玉从小穿开裆裤长大，一块啃过锅里的大腿骨，一块光着屁股洗过澡，更神奇的是，两个人生日只差两天，性格互补，血型一致，简直就是上天早就设定好的一对。<br>四张说，在我还不知道男孩和女孩在一起可以生小孩的时候，我就想跟何玉生小孩了。<br>两个人从小在一起过过家家，玩过给对方检查身体的游戏，不论见到谁的父母都可以直接叫爸妈。<br>四张跟何玉从小学到高中一直在一起，两个人一起经历了第二性征发育，长出喉结，胸脯耸起来，梦遗，初潮，青春期的各种烦躁，在别人都早恋的时候，两个人还是单纯得像是初生婴儿。<br>高中时代，何玉出过一次意外，失血过多。<br>四张不由分说地给何玉输了血。<br>四张说，看着我的血通过血管流进何玉的身体里，我就感觉我和何玉血脉相通了。就好像，就好像我把我的基因输送到何玉身体里一样。跟做爱的感觉一模一样，有战栗，有晕眩，还有高潮。真的，不骗人。  </p><p>最终，两个人去了山东两所相邻的大学，隔着一百八十公里。<br>上大学是两个人这么多年来第一次分开，四张说，我就好像经历了一次连体婴儿分离手术，而何玉就是我的幻肢，我总觉得一转头就能看见她，可是真转过头，又发现她不在了。  </p><p>真正的变故发生在一年后的情人节前夜。<br>四张接到了何玉的一通电话，电话里，何玉不无娇羞地说，四张，四张，有个男孩子跟我表白哎，你说我该不该答应他啊？<br>四张傻了，在四张听起来，这仿佛就是在问，老公老公，有个男孩子要跟我睡觉哎，你说我该不该答应他？<br>四张疯了，跳起来，念叨着，哎呀，我擦，我擦，我擦。<br>四张外套都没穿，直接冲出宿舍，抄起自己的自行车，蹬上车就往外狂奔。<br>夜色中的马路上，一个只穿着毛衣的缺货发狂地蹬着自行车，正在赶往一百八十公里之外的城市，问题是他要去干嘛呢？<br>四张说，当时我自己也不知道我也去干嘛，也许是去灭口。  </p><p>四张发狂地蹬了一整夜自行车，从毛衣到内裤都湿透了，整个人冒着热气，像是一个瓦特时代的蒸汽机。<br>到了情人节当天中午，四张终于赶到了何玉的宿舍，跳下自行车的时候，四张差点瘫在地上。<br>多年以后，四张回忆起来的时候，恨恨地说了一句英文：“I cannot feel my legs”  </p><p>何玉从女生宿舍楼下来的时候，四张正用一种诡异的外八字站着，穿着毛衣，瑟缩着，像是刚刚从戒备最森严的监狱里越狱而出。<br>何玉惊得差点背过气去，你怎么来了？你外套呢？<br>何玉不等四张说话，冲回去，不一会儿，拿着一件女式的粉色及膝羽绒服跑出来，不由分说地套在了四张身上。<br>四张继续用外八字的姿势站着，穿着粉色的女式及膝羽绒服，好不容易憋出一句话，你答应了？<br>何玉一愣，什么？<br>四张几乎都带了哭腔，你答应和追你的那个男人好了？<br>何玉哭笑不得，我……我还没有。<br>四张疯了，那你是准备答应了？<br>何玉沉默了一会儿，娇羞上脸，我不知道。哎，不过我问你，男生追求女生的时候，是不是脑子里都想着那个啊？<br>四张一下子这句话打得痛彻心扉。<br>时隔多年，四张回忆起那个时刻，还是痛得弯下了腰，恨不得立刻倒在地上舔马路。  </p><p>当天晚上，何玉带着四张到学校餐厅吃了饺子，把四张安排到男生宿舍睡一晚。<br>四张送何玉回女生宿舍的时候，那个追求何玉的男生抱着一束花等在了宿舍楼底下。<br>男生看到何玉身旁穿着粉色女式及膝羽绒服的四张，狐疑地往后退了两步。<br>何玉不好意思地对四张说，我过去跟他说两句。<br>四张说不出话，就看着何玉跑向那个男生，两个人叽里咕噜地不知道在说什么，四张恨自己为什么不好好学学唇语。<br>就在四张忍不住要冲过去的时候，何玉接过了男生递给她的那束花，对着男生娇羞地笑笑。<br>四张听见自己心碎的声音，不是咔嚓，也不是吧唧，也不是轰隆，而是何玉的笑声，呵呵。<br>四张男性的尊严终于复苏，他转身就跑，只留下何玉在他身后喊，你去哪啊？<br>夜色中的马路上，一个穿着女式及膝羽绒服的倒霉缺货，拼命地瞪着自行车奔驰在马路上。<br>四张形容说，那时候的心痛就像是，我的内脏全长在了外面，每走一步，都被粗糙的柏油马路摩擦。  </p><p>四张无法想象，自己青梅竹马了二十年的女孩，在情人节的夜晚，当着自己的面，答应了另一个不知道哪冒出来的男人的求爱。<br>四张觉得这个世界不会好了。<br>我们帮四张分析，也许是因为，熟悉的地方没有风景，熟悉的男人没有小鸡鸡吧。<br>四张哭着骂了一句，操你们大爷。  </p><p>大学里剩下的时光，四张没有谈恋爱，转而对各种社团活动产生了兴趣。先后参加过什么大学生电路装置比赛，大学生贫困山区十日行，大学生街头公益筹款之类。  </p><p>毕业之后，何玉拿到一份不错的offer，去了北京，成了北漂的一员。<br>四张就在山东一家运输公司跑货运，开着那种大卡车，一趟车要跑三四天，车上吃，车上睡，夏天就在驾驶室里挂个蚊帐，冬天就浑身贴着暖宝宝，车里放十几把暖瓶。碰上堵车的时候，也能堵个两三天，四张就和同样被困的司机斗地主，打保皇。<br>一次， 四张开着卡车跑长途送一车情趣玩具，路上，突然接到了何玉的电话。<br>何玉在电话里哭着说，四张，四张，我钱包丢了，身份证也没了，我租的房子下水道也堵了，现在正往外冒水，我找不到房东，我不知道该怎么办？<br>四张一听，嘴里念叨着，哎呀，我擦，我擦，我擦。<br>当即猛地掉转车头，临时改了路线，憋着一泡从山东就带着的尿，拉着一车情趣玩具就往北京狂奔，完全忘记了等着发货那批淘宝店店主。  </p><p>四张的大货车开不进小区，四张就把车停在小区外面的马路上，自己跳下车，憋着那泡尿，冲到了何玉租住的小区砸门。<br>何玉打开门，看着风尘仆仆的四张，呆住了。<br>四张从牙缝里提出一句话，先让我撒个尿。  </p><p>何玉听着四张水流湍急地打击着马桶，惊魂未定。<br>紧接着，又听见洗手间里，四张吭哧吭哧的声音。<br>半个小时后，四张走出来，洗手间里焕然一新，下水道也疏通了。<br>四张甩下一叠钱，还有一张银行卡，对何玉说，你先用着。<br>何玉刚要感谢，四张的手机急促的响起，货运公司老板在电话里狂吼，你他妈去哪了？<br>四张一下子急了，嘴里念叨着，哎呀，我擦，我擦，我擦。急忙冲出去，何玉在身后喊，你倒是吃了饭再走啊。<br>四张跑到小区外面，发现两个交警，面对着大货车，不知所措。<br>大货车的吨位，交警的拖车是拖不走的。<br>四张硬着头皮，跑过去，和交警套近乎，说，我老婆生孩子，您行行好。<br>四张认栽交了罚款，又开着货车，拉着一车情趣玩具，在高速公路上狂奔。  </p><p>四张任劳任怨，勤勤恳恳，攒了钱，自己买了一辆卡车，继续跑着长途，送过各种各样稀奇古怪的货物。<br>他最爱看的电影是《玩命快递》，四张说，这演的就他妈是我啊。我有一次大半夜的，就在一条黑压压的马路上，遇到拦路抢劫的。他们弄了一颗树横在马路中间，我一看不好，猛踩油门，飞驰而过。开除十公里之后，才发现两个轮胎都漏气了。  </p><p>四张再一次跑北京的时候，在北京留了一天。<br>何玉请四张吃饭。<br>何玉看起来有些奇怪，说话吞吞吐吐。<br>四张不耐烦，有事你就直说，跟我还用得着客气？<br>何玉说，我男朋友做生意，需要一笔钱周转，否则他过不了这个坎。<br>四张一愣，你什么时候交的男朋友？我怎么不知道？<br>何玉有些惭愧，我不想跟你说，我怕说了你难受。<br>四张沉默。<br>何玉说，他借了高利贷。<br>四张点了根烟，问，缺多少钱。<br>何玉鼓足勇气，说，十万。<br>四张抽了两口烟，给我五天，五天之后，我打你银行卡上。<br>四张说着就起身走了，留下何玉愣在原地。  </p><p>回到山东，四张把卡车卖了，加上自己的积蓄，凑了十万块给何玉。<br>我们都骂他，你脑残了？你不想想，万一何玉那个什么男朋友是个骗子呢？<br>四张无所谓的笑笑，我感觉，那男的百分百是骗子，好男人就是他妈再难，也不会向自己的女人开口要钱。<br>我们都惊呆了，你丫知道还借给她？<br>四张说，她要的东西，我没法拒绝。再说，让她上上课也好，她哪都好，就是太单纯。<br>我们再一次惊呆，她单纯？我看啊，是你傻逼。<br>四张切了一声，大智若愚，聪明还是傻逼，得分事儿。  </p><p>卖了卡车之后，四张又回到了原来的运输公司，继续打工。<br>一样勤勤恳恳，任劳任怨。<br>两个月后，何玉打电话给四张，哭着说，她男朋友不见了，电话也不接，他是个骗子。我对不起你。<br>四张说，不就十万块钱吗？有什么大不了的。花十万块，让你长长记性，值了。<br>何玉在电话里泣不成声。  </p><p>四张最爱跑的一条线，就是从山东到北京，他说，总觉得何玉在哪，哪立马就不一样了。就算何玉在撒哈拉，撒哈拉也能凭空生出喷泉来。就算何玉在索马里，索马里就立马变成天上人间。<br>何玉却消失了一段时间，再也没有联系四张，不知道是不是因为觉得自己就是个扫把星，总是拖累四张，因此故意远离四张的生活。  </p><p>又到了冬天。<br>四张依旧跑着长途，这次他拉着一车泡面跑北京，天寒地冻，高速公路上的积雪刚刚撒过盐，几乎都融化了，但是风很大。四张顺风撒尿的时候，尿柱射到了几百米外的广告牌上。<br>四张过了收费站口，猛地踩了刹车，他看见一个熟悉的身影，站在一望无际的高速公路隔离带旁边，冻得瑟瑟发抖，是何玉。<br>四张头发都炸起来了，他的车堵在高速公路入口，自己跳下去，几乎是飞到何玉面前，一把抱住何玉。<br>何玉整个人冻得就跟个冰美人一样，四张抱着何玉的时候打了个冷战，四张又生气又心疼，你他妈在这干嘛？<br>何玉泣不成声，我在这等了你三天了。晚上就在收费站里睡。我算错了时间，可我又不敢走，怕错过你。<br>四张疯了，你不会打个电话吗？<br>何玉说，我总是给你打电话，打电话给你都没好事，这一次我想见你。<br>四张紧紧地抱住何玉，直到高速公路路口堵成一排的车集体狂摁喇叭。  </p><p>四张开着大货车，行驶在冰雪皑皑的高速公路上。<br>何玉坐在副驾驶，身上裹着四张的军大衣，正在吃着一碗热气腾腾的泡面。<br>何玉吃完泡面，掏出两万块钱给四张。<br>四张生气了，你这是干什么？<br>何玉说，这是我这段时间攒的，还欠你八万，以后我就跟着你跑长途，给你打工，给你洗衣服，给你做饭。<br>四张傻了，你疯了，跑长途这是女人干的活吗？<br>何玉恨铁不成钢，从小到大，你怎么总是抓不到我的重点？我的重点在后半句，给你洗衣服，给你做饭！<br>四张愣愣地看着何玉，傻了。<br>何玉双颊都冻伤了，泛着红光，认真地看着四张。<br>大卡车远远地往前飞奔。  </p><p>今年，四张又买了一辆卡车，取了个名字，叫“何玉号”。<br>被同行取笑，你以为你开的是驱逐舰吗？<br>四张说，我开的就是驱逐舰，只属于我和我老婆的驱逐舰，一切坏人坏事统统退避。  </p><p>四张讲完了自己的故事，大家忍不住给她鼓掌。<br>四张憨笑，其实这也不算玩命爱一个姑娘，离着玩命还早呢。我只是觉得，既然爱了，就用点力，用点力总不会是坏事。<br>这个时候，一个女孩大着肚子走过来，走到四张身边。<br>四张吓坏了，你怎么来了？<br>女孩很娇羞，开玩笑似的，我想你了啊。<br>我们都愣住。<br>四张有些尴尬，跟大家介绍，这是我老婆，何玉。<br>我们都站起来，一起喊，嫂子好。<br>何玉被眼前的阵势吓了一跳，你们好，你们好，有空来家里喝酒。<br>四张笑得很欠揍，明目张胆秀恩爱。  </p><p>生命中，有些错过，最后成为了错过。<br>而有些错过，因为两个人的勇敢，又变成了相遇。<br>我们都期待美满的故事，但其实恰恰是靠着我们的勇气，让故事变得美满，让爱人就离着自己一个枕头的距离，有时候甚至是负20厘米的距离。<br>男人应该玩命爱一个姑娘。<br>好姑娘也值得被男人玩命去爱。<br>爱情，本来就是勇敢者的游戏。<br>如果你不够勇敢，你很快就会出局。<br>如果你够勇敢，此刻转个身，就能抱住你所爱的人吧。  </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;玩命的追一姑娘&quot;&gt;&lt;a href=&quot;#玩命的追一姑娘&quot; class=&quot;headerlink&quot; title=&quot;玩命的追一姑娘&quot;&gt;&lt;/a&gt;玩命的追一姑娘&lt;/h3&gt;&lt;p&gt;和朋友们聚会，大家决定玩一个游戏。&lt;br&gt;找一个主题，然后讲一段自己的真实经历，看看谁的经历最有起承
      
    
    </summary>
    
      <category term="短文" scheme="http://quiryrain.tk/categories/%E7%9F%AD%E6%96%87/"/>
    
    
      <category term="青春" scheme="http://quiryrain.tk/tags/%E9%9D%92%E6%98%A5/"/>
    
      <category term="付出" scheme="http://quiryrain.tk/tags/%E4%BB%98%E5%87%BA/"/>
    
  </entry>
  
  <entry>
    <title>那年刚好17岁</title>
    <link href="http://quiryrain.tk/230128515/"/>
    <id>http://quiryrain.tk/230128515/</id>
    <published>2019-02-25T08:54:44.000Z</published>
    <updated>2019-03-05T13:32:48.677Z</updated>
    
    <content type="html"><![CDATA[<script src=/js/crypto-js.js></script><script>function doDecrypt (pwd, onError) {console.log('in doDecrypt');const txt = document.getElementById('enc_content').innerHTML;let plantext;try {const bytes = CryptoJS.AES.decrypt(txt, pwd);var plaintext = bytes.toString(CryptoJS.enc.Utf8);} catch(err) {if(onError) {onError(err);}return;}document.getElementById('enc_content').innerHTML = plaintext;document.getElementById('enc_content').style.display = 'block';document.getElementById('enc_passwd').style.display = 'none';if(typeof MathJax !== 'undefined') {MathJax.Hub.Queue(['resetEquationNumbers', MathJax.InputJax.TeX],['PreProcess', MathJax.Hub],['Reprocess', MathJax.Hub]);}}</script><div id="enc_content" style="display:none">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</div><div id="enc_passwd"> <input id="enc_pwd_input" type="password" style="border-radius: 5px;border-style: groove;height: 30px;width: 50%;cursor: auto;font-size: 102%;color: currentColor;outline: none;text-overflow: initial;padding-left: 5px;" onkeydown="if (event.keyCode == 13) { decrypt(); return false;}"> <input type="submit" value="解&nbsp;密" onclick="decrypt()" style="width: 58px;height: 34px;border-radius: 5px;background-color: white;border-style: solid;color: currentColor;"><div id="enc_error" style="display: inline-block;color: #d84527;margin-left: 10px"></div><script>var onError = function(error) {document.getElementById("enc_error").innerHTML = "password error!"};function decrypt() {var passwd = document.getElementById("enc_pwd_input").value;console.log(passwd);doDecrypt(passwd, onError);}</script></div>]]></content>
    
    <summary type="html">
    
      关于个人的一些回忆
    
    </summary>
    
      <category term="梦廊" scheme="http://quiryrain.tk/categories/%E6%A2%A6%E5%BB%8A/"/>
    
    
      <category term="回忆" scheme="http://quiryrain.tk/tags/%E5%9B%9E%E5%BF%86/"/>
    
      <category term="青春" scheme="http://quiryrain.tk/tags/%E9%9D%92%E6%98%A5/"/>
    
  </entry>
  
  <entry>
    <title>Python进制转换</title>
    <link href="http://quiryrain.tk/%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2/"/>
    <id>http://quiryrain.tk/进制转换/</id>
    <published>2019-02-25T08:39:42.000Z</published>
    <updated>2019-03-05T13:32:48.683Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Python中实现的进制间的转换"><a href="#Python中实现的进制间的转换" class="headerlink" title="Python中实现的进制间的转换"></a>Python中实现的进制间的转换</h3><blockquote><p>在python中可以使用Python的内置函数进行进制间的转换。<br>  bin()：其他进制转二进制<br>  oct()：其他进制转八进制<br>  int()：其他进制转十进制<br>  hex()：其他进制转十六进制  </p></blockquote><h3 id="二进制、八进制、十六进制的形式"><a href="#二进制、八进制、十六进制的形式" class="headerlink" title="二进制、八进制、十六进制的形式"></a>二进制、八进制、十六进制的形式</h3><ul><li>二进制：以“0b”开头，如：0b111为十进制的7</li><li>八进制：以“0”开头，如：026为十进制的22</li><li>十六进制：以“0x”开头，如：0x1f为十进制的31</li></ul><h3 id="二进制、八进制、十六进制对照表"><a href="#二进制、八进制、十六进制对照表" class="headerlink" title="二进制、八进制、十六进制对照表"></a>二进制、八进制、十六进制对照表</h3><p><img src="/userImages/dzb.png" alt="对照表"></p><h3 id="二进制、八进制、十六进制转十进制"><a href="#二进制、八进制、十六进制转十进制" class="headerlink" title="二进制、八进制、十六进制转十进制"></a>二进制、八进制、十六进制转十进制</h3><p>使用int()函数，第一个参数是要转换的数字，类型为字符串，第二个参数是该数几进制的数，转化结果为一个十进制的数。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">二进制转十进制：</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'0b1111'</span>,<span class="number">2</span>)</span><br><span class="line"><span class="number">15</span></span><br><span class="line">八进制转十进制：</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'67'</span>,<span class="number">8</span>)</span><br><span class="line"><span class="number">55</span></span><br><span class="line">十六进制转十进制：</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'0x1f'</span>,<span class="number">16</span>)</span><br><span class="line"><span class="number">31</span></span><br></pre></td></tr></table></figure></p><h3 id="八进制、十进制、十六进制转二进制"><a href="#八进制、十进制、十六进制转二进制" class="headerlink" title="八进制、十进制、十六进制转二进制"></a>八进制、十进制、十六进制转二进制</h3><p>使用bin()函数，需要先将八进制、十六进制转换为十进制，然后才能转换为二进制，<br>即八进制/十六进制 —&gt; 十进制 —&gt; 二进制<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">八进制转二进制：</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(int(<span class="string">'016'</span>,<span class="number">8</span>))</span><br><span class="line"><span class="string">'0b1110'</span></span><br><span class="line">十进制转二进制：</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(<span class="number">14</span>)</span><br><span class="line"><span class="string">'0b1110'</span></span><br><span class="line">十六进制转二进制：</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(int(<span class="string">'0xe'</span>,<span class="number">16</span>))</span><br><span class="line"><span class="string">'0b1110'</span></span><br></pre></td></tr></table></figure></p><h3 id="二进制、十进制、十六进制转八进制"><a href="#二进制、十进制、十六进制转八进制" class="headerlink" title="二进制、十进制、十六进制转八进制"></a>二进制、十进制、十六进制转八进制</h3><p>使用oct()函数可以直接进行进制的转换<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">二进制转八进制：</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>oct(<span class="number">0b1110</span>)</span><br><span class="line"><span class="string">'016'</span></span><br><span class="line">十进制转八进制：</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>oct(<span class="number">14</span>)</span><br><span class="line"><span class="string">'016'</span></span><br><span class="line">十六进制转八进制：</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>oct(<span class="number">0xe</span>)</span><br><span class="line"><span class="string">'016'</span></span><br></pre></td></tr></table></figure></p><h3 id="二进制、八进制、十进制转十六进制"><a href="#二进制、八进制、十进制转十六进制" class="headerlink" title="二进制、八进制、十进制转十六进制"></a>二进制、八进制、十进制转十六进制</h3><p>使用hex()函数，需要先将二进制、八进制转换为十进制，然后才能转换为十六进制，<br>即二进制/八进制 —&gt; 十进制 —&gt; 十六进制<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">二进制转十六进制：</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hex(int(<span class="string">'0b1110'</span>,<span class="number">2</span>))</span><br><span class="line"><span class="string">'0xe'</span></span><br><span class="line">八进制转十六进制：</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hex(int(<span class="string">'016'</span>,<span class="number">8</span>))</span><br><span class="line"><span class="string">'0xe'</span></span><br><span class="line">十进制转十六进制：</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hex(<span class="number">14</span>)</span><br><span class="line"><span class="string">'0xe'</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Python中实现的进制间的转换&quot;&gt;&lt;a href=&quot;#Python中实现的进制间的转换&quot; class=&quot;headerlink&quot; title=&quot;Python中实现的进制间的转换&quot;&gt;&lt;/a&gt;Python中实现的进制间的转换&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;在
      
    
    </summary>
    
      <category term="Python杂记" scheme="http://quiryrain.tk/categories/Python%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="二进制" scheme="http://quiryrain.tk/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/"/>
    
      <category term="八进制" scheme="http://quiryrain.tk/tags/%E5%85%AB%E8%BF%9B%E5%88%B6/"/>
    
      <category term="十六进制" scheme="http://quiryrain.tk/tags/%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>Python位运算</title>
    <link href="http://quiryrain.tk/Python%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
    <id>http://quiryrain.tk/Python位运算/</id>
    <published>2019-02-25T08:23:00.000Z</published>
    <updated>2019-03-05T13:32:48.680Z</updated>
    
    <content type="html"><![CDATA[<p>Python中的位运算是程序设计中对位模式或二进制的一元和二元操作。<br>按位运算就是把数字转换为机器语言—以二进制形式表示  </p><h2 id="Python中的位运算有哪些？"><a href="#Python中的位运算有哪些？" class="headerlink" title="Python中的位运算有哪些？"></a>Python中的位运算有哪些？</h2><p>在Python中，按位运算符有左移运算符（&lt;&lt;）、右移运算符（&gt;&gt;）、按位与运算（&amp;）、按位或运算（|）、按位取反运算（~）、异或运算符，其中按位取反运算符为单目运算符</p><h3 id="按位左移运算符（-lt-lt-）"><a href="#按位左移运算符（-lt-lt-）" class="headerlink" title="按位左移运算符（&lt;&lt;）"></a>按位左移运算符（&lt;&lt;）</h3><p>在机器语言中，任何形式均以二进制的形式进行表示：<br>举例：7&lt;&lt;2<br>二进制为：111 左移两位：11100 最后结果为：28<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 7&lt;&lt;2</span><br><span class="line">28</span><br></pre></td></tr></table></figure></p><h3 id="按位右移运算符（-gt-gt-）"><a href="#按位右移运算符（-gt-gt-）" class="headerlink" title="按位右移运算符（&gt;&gt;）"></a>按位右移运算符（&gt;&gt;）</h3><p>具体的使用形式和左移一样。<br>举例：<br>7&gt;&gt;2<br>28&gt;&gt;2<br>二进制：7的二进制为：111，右移两位后为001，结果即为1<br>28的二进制为:11100，右移两位后为00111，结果为7<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 7&gt;&gt;2</span><br><span class="line">1</span><br><span class="line">&gt;&gt;&gt; 28&gt;&gt;2</span><br><span class="line">7</span><br></pre></td></tr></table></figure></p><p>由于正数和负数的二进制形式不同，所以此处特别说下以下两个运算。在计算机中，负数的二进制形式是其正数的补码形式，此处不做特别的说明，需要知道的以下给出一个<a href="http://www.cnblogs.com/junsky/archive/2009/08/06/1540727.html" target="_blank" rel="noopener">链接</a>.</p><h3 id="按位与运算（-amp-）"><a href="#按位与运算（-amp-）" class="headerlink" title="按位与运算（&amp;）"></a>按位与运算（&amp;）</h3><p>正数和正数的与运算：<br>举例： 7&amp;9<br>二进制：7的二进制为:0111，9的二进制为:1001<br>说明：根据（1&amp;1=1、1&amp;0=0、0&amp;1=0、0&amp;0=0）即相同位置同为1结果即为1，否者为0，由此可见7&amp;9的二进制形式为：0111&amp;1001 == 0001<br>正数与负数的与运算：<br>举例：-7&amp;5<br>二进制：-7：1001，5：0101。结果为1<br>说明：此处你可能要问-7的二进制和9的二进制不是相同吗？答案是不相同，在机器中-7的二进制为：11111111 11111111 11111111 11111001，9的二进制为：00000000 00000000 00000000 00001001。同样根据上文的同为1既为1，所以结果为1。运算最后结果的二进制形式从最左侧的第一个0前的1开始，直至右侧结尾，将此数转换为10进制，重点是，此处不是依次相加，而是依次相减，得到的结果最后加上负号即为最后运算的结果。<br>负数与负数的与运算：<br>举例：-5&amp;-8<br>二进制：-5：11111011，-8：11111000结果为-8<br>说明：你可能会很疑惑，此处的结果明明是11111000，结果怎么是-8.原因是-5&amp;-8的二进制形式为：11111011&amp;11111000 == 11111000，从最左侧的第一个0前的1开始，直至右侧结尾，将此数转换为10进制，重点是，此处不是依次相加，而是依次相减，得到的结果最后加上负号即为最后运算的结果。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 7&amp;9</span><br><span class="line">1</span><br><span class="line">&gt;&gt;&gt; -7&amp;5</span><br><span class="line">1</span><br><span class="line">&gt;&gt;&gt; -5&amp;-8</span><br><span class="line">-8</span><br></pre></td></tr></table></figure></p><h3 id="按位或运算（-）"><a href="#按位或运算（-）" class="headerlink" title="按位或运算（|）"></a>按位或运算（|）</h3><p>或运算和与运算十分相似，只是依据的逻辑运算不同，或运算的依据逻辑是相同位置有个为1结果即为1<br>正数与正数的或运算：<br>举例：7|9<br>二进制：7：0111，9：1001<br>说明：根据（1|0=1、1|1=1、0|1=1、0|0=0）可知，7|9的二进制形式为：0111|1001，结果为：15<br>负数与正数的或运算：<br>举例：-7|9<br>二进制：-7：11111001，9：00001001<br>说明：从最左侧的第一个0前的1开始的数，转化为十进制，需要进行的是依次相减运算。<br>负数与负数的或运算：<br>举例：-5|-8<br>二进制：-5：11111011，-8：11111000结果为-5<br>说明：运算最后结果的二进制形式从最左侧的第一个0前的1开始，直至右侧结尾，将此数转换为10进制，重点是，此处不是依次相加，而是依次相减，得到的结果最后加上负号即为最后运算的结果。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 7|9</span><br><span class="line">15</span><br><span class="line">&gt;&gt;&gt; -7|9</span><br><span class="line">-7</span><br><span class="line">&gt;&gt;&gt; -5|-8</span><br><span class="line">-5</span><br></pre></td></tr></table></figure></p><h3 id="按位取反运算符（-）"><a href="#按位取反运算符（-）" class="headerlink" title="按位取反运算符（~）"></a>按位取反运算符（~）</h3><p>将二进制数+1之后乘以-1,假如x的二进制数是y，x的按位翻转是-(y+1)<br>举例：-3<br>去反后：2<br>二进制：-3：11111101 取反操作：-（11111101+1）==-（11111110）==2  </p><h3 id="异或运算符（-）"><a href="#异或运算符（-）" class="headerlink" title="异或运算符（^）"></a>异或运算符（^）</h3><p>二进制对应位相加，不进位。依据逻辑为：（1^1=0、1^0=1、0^1=1、0^0=0）,同样依照，如果两个数中一正一负，则最后的二进制转十进制时依次相减，如果同正同负，则相加<br>正数和正数的异或运算：<br>举例：7^9<br>二进制：7：0111，9：1001<br>说明：7^9的二进制形式为：0111^1001 == 1110，十进制为：14<br>负数和正数的异或运算：<br>举例：-3^4<br>二进制：-3：11111101，4：00000100<br>说明：-3^4的二进制形式为：11111101^00000100 == 11111001,根据说明可以知道结果为-（222-1）=-7<br>负数和负数的异或运算：<br>举例：-7^-9<br>二进制：-7：11111001，-9：11110111<br>说明；-7^-9的二进制形式为：11111001^11110111 == 00001110，根据说明可以知道结果为222+2*2+2=14<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 7^9</span><br><span class="line">14</span><br><span class="line">&gt;&gt;&gt; -3^4</span><br><span class="line">-7</span><br><span class="line">&gt;&gt;&gt; -7^-9</span><br><span class="line">14</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Python中的位运算是程序设计中对位模式或二进制的一元和二元操作。&lt;br&gt;按位运算就是把数字转换为机器语言—以二进制形式表示  &lt;/p&gt;
&lt;h2 id=&quot;Python中的位运算有哪些？&quot;&gt;&lt;a href=&quot;#Python中的位运算有哪些？&quot; class=&quot;headerli
      
    
    </summary>
    
      <category term="Python杂记" scheme="http://quiryrain.tk/categories/Python%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="位运算" scheme="http://quiryrain.tk/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
    
  </entry>
  
  <entry>
    <title>Hypervisor Drivers</title>
    <link href="http://quiryrain.tk/hypervisor-drivers/"/>
    <id>http://quiryrain.tk/hypervisor-drivers/</id>
    <published>2019-02-25T08:10:07.000Z</published>
    <updated>2019-03-05T13:32:48.681Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Drivers-Models"><a href="#Drivers-Models" class="headerlink" title="Drivers Models"></a>Drivers Models</h3><p>The libvirt library exposes a guaranteed stable API &amp; ABI which is decoupled from any particular virtualization technology. In addition many of the APIs have associated XML schemata which are considered part of the stable ABI guarantee. Internally, there are multiple of implementations of the public ABI, each targeting a different virtualization technology. Each implementation is referred to as a driver. When obtaining a instance of the virConnect class, the application developer can provide a URI to determine which hypervisor driver is activated.<br>No two virtualization technologies have exactly the same functionality. The libvirt goal is not to restrict applications to a lowest common denominator, since this would result in an unacceptably limited API. Instead libvirt attempts to define a representation of concepts and configuration that is hypervisor agnostic, and adaptable to allow future extensions. Thus, if two hypervisors implement a comparable feature, libvirt provides a uniform control mechanism or configuration format for that feature.<br>If a libvirt driver does not implement a particular API, then it will return a VIR_ERR_NO_SUPPORT error code enabling this to be detected. There is also an API to allow applications to the query certain capabilities of a hypervisor, such as the type of guest ABIs that are supported.<br>Internally a libvirt driver will attempt to utilize whatever management channels are available for the virtualization technology in question. For some drivers this may require libvirt to run directly on the host being managed, talking to a local hypervisor, while others may be able to communicate remotely over an RPC service. For drivers which have no native remote communication capability, libvirt provides a generic secure RPC service. This is discussed in detail later in this chapter.  </p><h3 id="Hypervisor-drivers"><a href="#Hypervisor-drivers" class="headerlink" title="Hypervisor drivers"></a>Hypervisor drivers</h3><ul><li><p>Xen: The open source Xen hypervisor providing paravirtualized and fully virtualized machines.</p><p>A single system driver runs in the Dom0 host talking directly to a combination of the hypervisor,xenstored and xend. Example local URI scheme xen:///.</p></li><li><p>QEMU: Any open source QEMU based virtualization technology, including KVM. A single privileged system driver runs in the host managing QEMU processes. Each unprivileged user account also has a private instance of the driver. Example privileged URI scheme qemu:///system. Example unprivileged URI scheme qemu:///session</p></li><li><p>UML: The User Mode Linux kernel, a pure paravirtualization technology. A single privileged system driver runs in the host managing UML processes. Each unprivileged user account also has a private instance of the driver. Example privileged URI scheme uml:///system. Example unprivileged URI scheme uml:///session</p></li><li><p>OpenVZ: The OpenVZ container based virtualization technology, using a modified Linux host kernel.</p><p>A single privileged system driver runs in the host talking to the OpenVZ tools. Example privileged URI scheme openvz:///system</p></li><li><p>LXC: The native Linux container based virtualization technology, available with Linux kernels since 2.6.25. A single privileged system driver runs in the host talking to the kernel. Example privileged URI scheme lxc:///</p></li><li>Remote: Generic secure RPC service talking to a libvirtd daemon. Encryption and authentication using a choice of TLS, x509 certificates, SASL (GSSAPI/Kerberos) and SSH tunneling. URIs follow the scheme of the desired driver, but with a hostname filled in, and a data transport name appended to the URI scheme. Example URI to talk to Xen over a TLS channel xen+tls://somehostname/. Example URI to talk to QEMU over a SASL channel qemu+tcp:///somehost/system</li><li><p>Test: A mock driver, providing a virtual in-memory hypervisor covering all the libvirt APIs. Facilities testing of applications using libvirt, by allowing automated tests to run which exercise libvirt APIs without needing to deal with a real hypervisor Example default URI scheme test:///default.</p><p>Example customized URI scheme test:///path/to/driver/config.xml</p></li></ul><p><img src="/userImages/hypervisor.png" alt="Hypervisor"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Drivers-Models&quot;&gt;&lt;a href=&quot;#Drivers-Models&quot; class=&quot;headerlink&quot; title=&quot;Drivers Models&quot;&gt;&lt;/a&gt;Drivers Models&lt;/h3&gt;&lt;p&gt;The libvirt library ex
      
    
    </summary>
    
      <category term="虚拟化" scheme="http://quiryrain.tk/categories/%E8%99%9A%E6%8B%9F%E5%8C%96/"/>
    
    
      <category term="Hypervisor" scheme="http://quiryrain.tk/tags/Hypervisor/"/>
    
      <category term="qemu" scheme="http://quiryrain.tk/tags/qemu/"/>
    
      <category term="xen" scheme="http://quiryrain.tk/tags/xen/"/>
    
  </entry>
  
  <entry>
    <title>虚拟机的动、静态迁移</title>
    <link href="http://quiryrain.tk/vmmove/"/>
    <id>http://quiryrain.tk/vmmove/</id>
    <published>2019-02-25T07:45:56.000Z</published>
    <updated>2019-03-05T13:32:48.682Z</updated>
    
    <content type="html"><![CDATA[<h3 id="动静态迁移的原理"><a href="#动静态迁移的原理" class="headerlink" title="动静态迁移的原理"></a>动静态迁移的原理</h3><p>静态迁移是指在虚拟机关闭或暂停的情况下，将源宿主机上虚拟机的磁盘文件和配置文件拷贝到目标宿主机上。这种方式需要显式的停止虚拟机运行，对服务可用性要求高的需求不合适。</p><p>动态迁移无需拷贝虚拟机配置文件和磁盘文件，但是需要迁移的主机之间有相同的目录结构放置虚拟机磁盘文件，可以通过多种方式实现，本例采用基于共享存储动态迁移，通过NFS来实现。</p><h3 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a>实验环境</h3><blockquote><p>源宿主机：Ubuntu17.10 Server版操作系统，4.10.0-38-generic内核。下文中以“Node1”表示，主机名为Service，IP地址为192.168.200.132，NFS挂载目录/opt。<br>  目标宿主机：Ubuntu17.10 Server版操作系统，4.10.0-38-generic内核。下文中以“Node2”表示，主机名为Service1，IP地址为192.168.200.131，NFS挂载目录/opt。<br>  基于QEMU的动态迁移虚拟机镜像文件为ubuntu16server.img。<br>  基于libvirt的静态迁移测试虚拟机：demo1，IP为192.168.200.132，虚拟镜像文件为ubuntu16.img。<br>  基于libvirt的动态迁移测试虚拟机：demo2，IP为192.168.200.131，虚拟镜像文件为ubuntu16.img。<br>  NFS服务器：Ubuntu17.10 Server版，4.10.0-38-generic内核。IP地址为192.168.200.130，服务目录为/opt/share。  </p></blockquote><h2 id="配置步骤"><a href="#配置步骤" class="headerlink" title="配置步骤"></a>配置步骤</h2><h3 id="NFS服务器的搭建"><a href="#NFS服务器的搭建" class="headerlink" title="NFS服务器的搭建"></a>NFS服务器的搭建</h3><ul><li>KVM虚拟机动态迁移无需拷贝虚拟机配置文件和磁盘文件，但是需要迁移的主机之间有相同的目录结构放置虚拟机磁盘文件（本例为“/opt/share”目录），这里的动态迁移是基于共享存储动态迁移，通过NFS来实现，需要QEMU 0.12.2以上版本支持。可以使用以下命令查看安装的QEMU的版本号。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qemu-img –help|grep version</span><br></pre></td></tr></table></figure></li></ul><ul><li>首先在NFS服务器上，下载安装NFS，kernel-server相当于server端,common是client端，使用命令以下命令进行安装NFS:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nfs-kernel-server nfs-common -y</span><br></pre></td></tr></table></figure></li></ul><ul><li>配置NFS服务器，将NFS服务器上的“/opt/share”目录设为服务目录。首先使用以下命令创建目录，然后修改创建的目录权限，同时如果不放心是否权限修改了，可以查看下文件夹的权限，修改后为“drwxr-xr-x”<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /opt/share,</span><br><span class="line">sudo chmod 777 /opt/share</span><br><span class="line">sudo ll /opt</span><br></pre></td></tr></table></figure></li></ul><ul><li>接下来使用vim修改<code>/etc/exports</code>:文件添加共享目录，在该文件最后添加以下内容即可。/opt/share:表示要设置的共享目录，__:表示允许所有的网段访问，也可以使用具体的IP。rw:表示挂载此目录的客户端对该共享目录具有读写权限。sync:表示资料同步写入内存和硬盘。no_root_squash:表示root用户具有对根目录的完全管理访问权限。no_subtree_check:表示不检查父目录的权限。修改完毕后保存退出。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/opt/share (rw,sync,no_subtree_check,no_root_squash)</span><br></pre></td></tr></table></figure></li></ul><ul><li><code>/etc/exports</code>文件修改后，使用命令然后进行刷新。最后启动NFS服务，命令如下:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo exportfs –r</span><br><span class="line">sudo /etc/init.d/rpcbind restart</span><br><span class="line">sudo /etc/init.d/nfs-kernel-server restart</span><br></pre></td></tr></table></figure></li></ul><ul><li>NFS服务启动后，在Node1上使用以下命令查看远程主机的共享目录，可以看到以下斜体内容<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo showmount -e 192.168.200.130</span><br><span class="line">root@Service:~# sudo showmount -e 192.168.200.130</span><br><span class="line">Export list for 192.168.200.130:</span><br><span class="line">/opt/share *</span><br></pre></td></tr></table></figure></li></ul><ul><li>分别在Node1和Node2上分别挂载NFS服务器的共享文件夹到本地“/opt”目录中，然后将Node1上的的虚拟磁盘文件ubuntu16server.img（前面实验中制作的ubuntu的镜像文件）拷贝到挂载NFS服务器共享目录的文件夹“/opt”中(我制作好的镜像文件在/root文件夹中)，之后可以看到ubuntu16server.img镜像文件。在节点2上执行同样的操作，但在Node2中不用执行拷贝这一命令。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t nfs 192.168.200.130:/opt/share /opt -o rw</span><br><span class="line">sudo cp /root/ubuntu16server.img /opt</span><br></pre></td></tr></table></figure></li></ul><ul><li>挂载拷贝完成后两节点都有相同的虚拟机磁盘文件存储目录</li></ul><h3 id="基于QEMU的虚拟机动态迁移"><a href="#基于QEMU的虚拟机动态迁移" class="headerlink" title="基于QEMU的虚拟机动态迁移"></a>基于QEMU的虚拟机动态迁移</h3><ul><li>在Node1上使用如下命令启动虚拟机，ubuntu16server.img为前面实验制作的镜像文件，-monitor stdio表示可以进入QEMU监控器，以便接下来执行迁移命令。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qemu-system-x86_64 -hda ubuntu16server.img -m 1024 -smp 1 -vnc :0 -monitor stdio</span><br><span class="line">(qemu)</span><br></pre></td></tr></table></figure></li></ul><ul><li>打开VNC界面，连接节点1上的QEMU虚拟机,登陆之后并执行“top”命令,可以看到界面一直在发生改变。</li><li>在Node2上使用以下命令启动一个虚拟机，该虚拟机并没有真实启动，只是用于等待接收动态迁移过来的内存内容，使用VNC连接后显示界面状态为黑屏，或者是有一行提示。这里需要注意：在Node2上，NFS挂载目录必须与源主机上保持一致；启动客户机命令也需一致，但是需要增加-incoming 选项。“-incoming tcp:0:6666” 这个参数表示在6666 端口建立一个tcp socket 连接用于接收来自于源宿主机的动态迁移的内容，其中“0”表示允许来自任何主机的连接，“-incoming”表示使QEMU进程进入到迁移监听（migration-listen）模式，而不是真正以命令行中的镜像文件运行客户机。另外，这里是以NFS服务器上的镜像文件作为虚拟机磁盘来启动虚拟机，如果有多个用户同时使用NFS服务器上的镜像文件，请将镜像文件在本地进行派生，使用派生后的镜像文件启动虚拟机，具体方式读者可自行查阅相关资料<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qemu-system-x86_64 -hda /opt/ubuntu16server.img -m 1024 -smp 1 -vnc :0 -incoming tcp:0:6666</span><br></pre></td></tr></table></figure></li></ul><ul><li>在Node1源宿主机的qemu monitor 命令行中输入以下命令迁移虚拟机，进入动态迁移的流程，其中“192.168.200.131”是目标宿主机IP，TCP协议和6666端口与目标宿主机上命令行的-incoming 参数保持一致<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(qemu) migrate tcp:192.168.200.131:6666 //(qemu)为启动镜像时出现的qemu monitor</span><br></pre></td></tr></table></figure></li></ul><ul><li>在Node1上执行”migrate”命令从开始到执行完成，大约十秒钟（视网络而定），在执行完成后迁移成功。迁移后在Node2上，也就是目标宿主机上，之前处于迁移监听状态的虚拟机开始运行，在该虚拟机中可以查看到，原来在Node1上运行的虚拟机上执行的top命令在迁移后仍在继续在Node2上执行。</li><li>至此基于QEMU的虚拟机动态迁移完成</li></ul><h3 id="基于Libvirt的虚拟机静态迁移"><a href="#基于Libvirt的虚拟机静态迁移" class="headerlink" title="基于Libvirt的虚拟机静态迁移"></a>基于Libvirt的虚拟机静态迁移</h3><ul><li>静态迁移也叫做常规迁移、离线迁移（Offline Migration）。是在虚拟机关机或暂停的情况下，拷贝虚拟机磁盘文件与配置文件从源宿主机到目标宿主机中，实现的从一台物理机到另一台物理机的迁移。因为虚拟机的文件系统建立在虚拟机镜像文件上面，所以在虚拟机关机的情况下，只需要简单的迁移虚拟机镜像和相应的配置文件到另外一台物理主机上即可。如果需要保存虚拟机迁移之前的状态，那么应该在迁移之前将虚拟机暂停，然后拷贝状态至目标宿主机，最后在目标宿主机重建虚拟机状态，恢复执行。这种方式的迁移过程需要显式的停止虚拟机的运行。从用户角度看，有明确的一段停机时间，虚拟机上的服务不可用。这种迁移方式简单易行，适用于对服务可用性要求不严格的场合。</li><li>为网络添加br0网桥<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo brctl addbr br0</span><br><span class="line">sudo brctl addif br0 ens33</span><br><span class="line">sudo brctl stp br0 on</span><br><span class="line">sudo ifconfig ens33 0</span><br><span class="line">sudo dhclient br0</span><br></pre></td></tr></table></figure></li></ul><ul><li>在Node1上进行操作，首先确定demo虚拟机状态为“shut off”,如果不是可以执行“destroy ”进行关闭<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh list –all</span><br></pre></td></tr></table></figure></li></ul><ul><li>准备迁移demo虚拟机，查看demo虚拟机的磁盘文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virsh domblklist</span><br></pre></td></tr></table></figure></li></ul><ul><li>导出虚拟机配置文件demo.xml、ubuntu16.img,将其发送到Node2中与Node1中文件对应的文件夹（demo.xml文件在文章结尾会给出代码）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo scp /root/demo.xml /root/ubuntu16.img 192.168.200.131:/root</span><br></pre></td></tr></table></figure></li></ul><ul><li>之后开始在目标宿主机Node2上进行虚拟机的配置和启动。</li><li>使用virsh的子命令define定义并注册demo虚拟机<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh define /root/demo.xml</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>启动迁移后的demo虚拟机,通过VNC查看,VNC端口查看</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh vncdisplay</span><br></pre></td></tr></table></figure></li><li><p>然后通过VNC查看是否可以登陆和其他操作</p></li></ul><h3 id="基于Libvirt的虚拟机动态迁移"><a href="#基于Libvirt的虚拟机动态迁移" class="headerlink" title="基于Libvirt的虚拟机动态迁移"></a>基于Libvirt的虚拟机动态迁移</h3><ul><li>此处我说明下，这种迁移虽然为基于Libvirt的动态迁移，但是其迁移的只是虚拟机的状态而不是虚拟机的状态和文件，这一点我再次特别说明。</li><li><p>将Node1上的“ubuntu16.img”发送到Node2对应的文件夹,此时的demo状态为“shut off”，发送后启动demo虚拟机</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo scp /root/ubuntu16.img 192.168.200.131:/root</span><br></pre></td></tr></table></figure></li><li><p>查看Node1上虚拟机状态，demo虚拟机保证处于“runing”（如果demo处于“shut off”，将其启动运行“sudo virsh start demo”）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh list –all</span><br></pre></td></tr></table></figure></li><li><p>查看Node2上虚拟机状态，确保无虚拟机运行，命令如上</p></li><li>通过VNC连接登陆，并执行“top”命令</li><li><p>在Node1上执行“virsh migrate”迁移命令，虚拟机demo在迁移出去的过程中，状态有从“running”到“shut off”的一个改变。–verbose 指迁移demo虚拟机，192.168.200.131为节点2的IP地址，使用tcp协议连接，–unsafe参数表示跳过安全检测, /system为以root身份进行状态迁移,qemu+ssh表示为通过ssh通道连接到远程节点的system实例，具有最大权限来管理远程节点上的虚拟机资源</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh migrate –live –verbose demo qemu+ssh://192.168.200.131/system tcp://192.168.200.131 –unsafe</span><br></pre></td></tr></table></figure></li><li><p>在Node2上,查看虚拟机demo虚拟机状态为“runing”</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh list –all</span><br></pre></td></tr></table></figure></li><li><p>在迁移过程中，可以通过另外一台客户机一直ping虚拟机demo，查看demo迁移过程中的可连接性。实际上迁移过程除了偶尔有几个包的中断，基本上没有太大影响</p></li><li><p>此时虽然demo虚拟机已经在Node2上启动了，但是Node2上还没有demo虚拟机的配置文件。这时需要创建配置文件并定义该虚拟机，可以通过迁移过来的虚拟机内存状态创建虚拟机配置文件，然后通过xml配置文件定义虚拟机。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh dumpxml demo &gt; /etc/libvirt/qemu/demo1.xml //之所以命名为demo1.xml是因为，在libvirt静态迁移过程中已经有个demo.xml文件，虽然不在同一个文件夹，为了避免搞混。</span><br><span class="line">sudo virsh define /etc/libvirt/qemu/demo1.xml</span><br></pre></td></tr></table></figure></li><li><p>通过VNC连接查看，VNC端口号查询。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh vncdisplay demo</span><br></pre></td></tr></table></figure></li><li><p>在通过VNC连接上后发现迁移前的“top”命令依然在执行</p></li><li>至此，demo虚拟机迁移完成。</li></ul><hr><h3 id="demo-xml文件中的内容"><a href="#demo-xml文件中的内容" class="headerlink" title="demo.xml文件中的内容"></a>demo.xml文件中的内容</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">WARNING: THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE</span></span><br><span class="line"><span class="comment">OVERWRITTEN AND LOST. Changes to this xml configuration should be made using:</span></span><br><span class="line"><span class="comment">  virsh edit demo</span></span><br><span class="line"><span class="comment">or other application using the libvirt API.</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">domain</span> <span class="attr">type</span>=<span class="string">'kvm'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">uuid</span>&gt;</span>782ca9b9-8403-4fcd-979e-e4f038aaeb15<span class="tag">&lt;/<span class="name">uuid</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">memory</span> <span class="attr">unit</span>=<span class="string">'KiB'</span>&gt;</span>1048576<span class="tag">&lt;/<span class="name">memory</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">currentMemory</span> <span class="attr">unit</span>=<span class="string">'KiB'</span>&gt;</span>1048576<span class="tag">&lt;/<span class="name">currentMemory</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">vcpu</span> <span class="attr">placement</span>=<span class="string">'static'</span>&gt;</span>1<span class="tag">&lt;/<span class="name">vcpu</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">os</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span> <span class="attr">arch</span>=<span class="string">'x86_64'</span> <span class="attr">machine</span>=<span class="string">'pc-i440fx-trusty'</span>&gt;</span>hvm<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">boot</span> <span class="attr">dev</span>=<span class="string">'cdrom'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">boot</span> <span class="attr">dev</span>=<span class="string">'hd'</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">os</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">features</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">acpi</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">apic</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pae</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">features</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">clock</span> <span class="attr">offset</span>=<span class="string">'localtime'</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">on_poweroff</span>&gt;</span>destroy<span class="tag">&lt;/<span class="name">on_poweroff</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">on_reboot</span>&gt;</span>restart<span class="tag">&lt;/<span class="name">on_reboot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">on_crash</span>&gt;</span>destroy<span class="tag">&lt;/<span class="name">on_crash</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">devices</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">emulator</span>&gt;</span>/usr/bin/kvm<span class="tag">&lt;/<span class="name">emulator</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">disk</span> <span class="attr">type</span>=<span class="string">'file'</span> <span class="attr">device</span>=<span class="string">'disk'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">driver</span> <span class="attr">name</span>=<span class="string">'qemu'</span> <span class="attr">type</span>=<span class="string">'qcow2'</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">source</span> <span class="attr">file</span>=<span class="string">'/home/ubuntu16.img'</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">target</span> <span class="attr">dev</span>=<span class="string">'hda'</span> <span class="attr">bus</span>=<span class="string">'ide'</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">'drive'</span> <span class="attr">controller</span>=<span class="string">'0'</span> <span class="attr">bus</span>=<span class="string">'0'</span> <span class="attr">target</span>=<span class="string">'0'</span> <span class="attr">unit</span>=<span class="string">'0'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">disk</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">controller</span> <span class="attr">type</span>=<span class="string">'usb'</span> <span class="attr">index</span>=<span class="string">'0'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">'pci'</span> <span class="attr">domain</span>=<span class="string">'0x0000'</span> <span class="attr">bus</span>=<span class="string">'0x00'</span> <span class="attr">slot</span>=<span class="string">'0x01'</span> <span class="attr">function</span>=<span class="string">'0x2'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">controller</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">controller</span> <span class="attr">type</span>=<span class="string">'pci'</span> <span class="attr">index</span>=<span class="string">'0'</span> <span class="attr">model</span>=<span class="string">'pci-root'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">controller</span> <span class="attr">type</span>=<span class="string">'ide'</span> <span class="attr">index</span>=<span class="string">'0'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">'pci'</span> <span class="attr">domain</span>=<span class="string">'0x0000'</span> <span class="attr">bus</span>=<span class="string">'0x00'</span> <span class="attr">slot</span>=<span class="string">'0x01'</span> <span class="attr">function</span>=<span class="string">'0x1'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">controller</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interface</span> <span class="attr">type</span>=<span class="string">'bridge'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mac</span> <span class="attr">address</span>=<span class="string">'52:54:00:c0:a2:8a'</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">source</span> <span class="attr">bridge</span>=<span class="string">'br0'</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">model</span> <span class="attr">type</span>=<span class="string">'rtl8139'</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">'pci'</span> <span class="attr">domain</span>=<span class="string">'0x0000'</span> <span class="attr">bus</span>=<span class="string">'0x00'</span> <span class="attr">slot</span>=<span class="string">'0x03'</span> <span class="attr">function</span>=<span class="string">'0x0'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'tablet'</span> <span class="attr">bus</span>=<span class="string">'usb'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'mouse'</span> <span class="attr">bus</span>=<span class="string">'ps2'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'keyboard'</span> <span class="attr">bus</span>=<span class="string">'ps2'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">graphics</span> <span class="attr">type</span>=<span class="string">'vnc'</span> <span class="attr">port</span>=<span class="string">'-1'</span> <span class="attr">autoport</span>=<span class="string">'yes'</span> <span class="attr">listen</span>=<span class="string">'0.0.0.0'</span> <span class="attr">keymap</span>=<span class="string">'en-us'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">model</span> <span class="attr">type</span>=<span class="string">'cirrus'</span> <span class="attr">vram</span>=<span class="string">'9216'</span> <span class="attr">heads</span>=<span class="string">'1'</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">'pci'</span> <span class="attr">domain</span>=<span class="string">'0x0000'</span> <span class="attr">bus</span>=<span class="string">'0x00'</span> <span class="attr">slot</span>=<span class="string">'0x02'</span> <span class="attr">function</span>=<span class="string">'0x0'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">memballoon</span> <span class="attr">model</span>=<span class="string">'virtio'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">'pci'</span> <span class="attr">domain</span>=<span class="string">'0x0000'</span> <span class="attr">bus</span>=<span class="string">'0x00'</span> <span class="attr">slot</span>=<span class="string">'0x04'</span> <span class="attr">function</span>=<span class="string">'0x0'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">memballoon</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">devices</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">domain</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;动静态迁移的原理&quot;&gt;&lt;a href=&quot;#动静态迁移的原理&quot; class=&quot;headerlink&quot; title=&quot;动静态迁移的原理&quot;&gt;&lt;/a&gt;动静态迁移的原理&lt;/h3&gt;&lt;p&gt;静态迁移是指在虚拟机关闭或暂停的情况下，将源宿主机上虚拟机的磁盘文件和配置文件拷贝到目标宿主
      
    
    </summary>
    
      <category term="Python后端" scheme="http://quiryrain.tk/categories/Python%E5%90%8E%E7%AB%AF/"/>
    
    
      <category term="虚拟机迁移" scheme="http://quiryrain.tk/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%BF%81%E7%A7%BB/"/>
    
      <category term="NFS" scheme="http://quiryrain.tk/tags/NFS/"/>
    
      <category term="动态迁移" scheme="http://quiryrain.tk/tags/%E5%8A%A8%E6%80%81%E8%BF%81%E7%A7%BB/"/>
    
  </entry>
  
  <entry>
    <title>tempfile模块的用法</title>
    <link href="http://quiryrain.tk/tempfile/"/>
    <id>http://quiryrain.tk/tempfile/</id>
    <published>2019-02-25T07:40:43.000Z</published>
    <updated>2019-03-05T13:32:48.681Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>tempfile模块，用来对临时数据进行操作</p></blockquote><h2 id="tempfile-临时文件-夹-操作"><a href="#tempfile-临时文件-夹-操作" class="headerlink" title="tempfile 临时文件(夹)操作"></a>tempfile 临时文件(夹)操作</h2><h3 id="tempfile-mkstemp-suffix-”-prefix-’tmp’-dir-None-text-False"><a href="#tempfile-mkstemp-suffix-”-prefix-’tmp’-dir-None-text-False" class="headerlink" title="tempfile.mkstemp([suffix=”[, prefix=’tmp’[, dir=None[, text=False]]]])"></a>tempfile.mkstemp([suffix=”[, prefix=’tmp’[, dir=None[, text=False]]]])</h3><p>mkstemp方法用于创建一个临时文件。该方法仅仅用于创建临时文件，调用tempfile.mkstemp函数后，返回包含两个元素的元组，第一个元素指示操作该临时文件的安全级别，第二个元素指示该临时文件的路径。参数suffix和prefix分别表示临时文件名称的后缀和前缀；dir指定了临时文件所在的目录，如果没有指定目录，将根据系统环境变量TMPDIR, TEMP或者TMP的设置来保存临时文件；参数text指定了是否以文本的形式来操作文件，默认为False，表示以二进制的形式来操作文件。</p><h3 id="tempfile-mkdtemp-suffix-”-prefix-’tmp’-dir-None"><a href="#tempfile-mkdtemp-suffix-”-prefix-’tmp’-dir-None" class="headerlink" title="tempfile.mkdtemp([suffix=”[, prefix=’tmp’[, dir=None]]])"></a>tempfile.mkdtemp([suffix=”[, prefix=’tmp’[, dir=None]]])</h3><p>该函数用于创建一个临时文件夹。参数的意思与tempfile.mkdtemp一样。它返回临时文件夹的绝对路径。</p><h3 id="tempfile-mktemp-suffix-”-prefix-’tmp’-dir-None"><a href="#tempfile-mktemp-suffix-”-prefix-’tmp’-dir-None" class="headerlink" title="tempfile.mktemp([suffix=”[, prefix=’tmp’[, dir=None]]])"></a>tempfile.mktemp([suffix=”[, prefix=’tmp’[, dir=None]]])</h3><p>mktemp用于返回一个临时文件的路径，但并不创建该临时文件。</p><h3 id="tempfile-tempdir"><a href="#tempfile-tempdir" class="headerlink" title="tempfile.tempdir"></a>tempfile.tempdir</h3><p>该属性用于指定创建的临时文件（夹）所在的默认文件夹。如果没有设置该属性或者将其设为None，Python将返回以下环境变量TMPDIR, TEMP, TEMP指定的目录，如果没有定义这些环境变量，临时文件将被创建在当前工作目录。</p><h3 id="tempfile-gettempdir"><a href="#tempfile-gettempdir" class="headerlink" title="tempfile.gettempdir()"></a>tempfile.gettempdir()</h3><p>gettempdir()则用于返回保存临时文件的文件夹路径。</p><h3 id="tempfile-TemporaryFile-mode-’w-b’-bufsize-1-suffix-”-prefix-’tmp’-dir-None"><a href="#tempfile-TemporaryFile-mode-’w-b’-bufsize-1-suffix-”-prefix-’tmp’-dir-None" class="headerlink" title="tempfile.TemporaryFile([mode=’w+b’[, bufsize=-1[, suffix=”[, prefix=’tmp’[, dir=None]]]]])"></a>tempfile.TemporaryFile([mode=’w+b’[, bufsize=-1[, suffix=”[, prefix=’tmp’[, dir=None]]]]])</h3><p>该函数返回一个类文件对象(file-like)用于临时数据保存（实际上对应磁盘上的一个临时文件）。当文件对象被close或者被del的时候，临时文件将从磁盘上删除。mode、bufsize参数的单方与open()函数一样；suffix和prefix指定了临时文件名的后缀和前缀；dir用于设置临时文件默认的保存路径。返回的类文件对象有一个file属性，它指向真正操作的底层的file对象。</p><h3 id="tempfile-NamedTemporaryFile-mode-’w-b’-bufsize-1-suffix-”-prefix-’tmp’-dir-None-delete-True"><a href="#tempfile-NamedTemporaryFile-mode-’w-b’-bufsize-1-suffix-”-prefix-’tmp’-dir-None-delete-True" class="headerlink" title="tempfile.NamedTemporaryFile([mode=’w+b’[, bufsize=-1[, suffix=”[, prefix=’tmp’[, dir=None[, delete=True]]]]]])"></a>tempfile.NamedTemporaryFile([mode=’w+b’[, bufsize=-1[, suffix=”[, prefix=’tmp’[, dir=None[, delete=True]]]]]])</h3><p>tempfile.NamedTemporaryFile函数的行为与tempfile.TemporaryFile类似，只不过它多了一个delete参数，用于指定类文件对象close或者被del之后，是否也一同删除磁盘上的临时文件（当delete = True的时候，行为与TemporaryFile一样）。</p><h3 id="tempfile-SpooledTemporaryFile-max-size-0-mode-’w-b’-bufsize-1-suffix-”-prefix-’tmp’-dir-None"><a href="#tempfile-SpooledTemporaryFile-max-size-0-mode-’w-b’-bufsize-1-suffix-”-prefix-’tmp’-dir-None" class="headerlink" title="tempfile.SpooledTemporaryFile([max_size=0[, mode=’w+b’[, bufsize=-1[, suffix=”[, prefix=’tmp’[, dir=None]]]]]])"></a>tempfile.SpooledTemporaryFile([max_size=0[, mode=’w+b’[, bufsize=-1[, suffix=”[, prefix=’tmp’[, dir=None]]]]]])</h3><p>tempfile.SpooledTemporaryFile函数的行为与tempfile.TemporaryFile类似。不同的是向类文件对象写数据的时候，数据长度只有到达参数max_size指定大小时，或者调用类文件对象的fileno()方法，数据才会真正写入到磁盘的临时文件中。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;tempfile模块，用来对临时数据进行操作&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;tempfile-临时文件-夹-操作&quot;&gt;&lt;a href=&quot;#tempfile-临时文件-夹-操作&quot; class=&quot;headerlink&quot; title=
      
    
    </summary>
    
      <category term="Python后端" scheme="http://quiryrain.tk/categories/Python%E5%90%8E%E7%AB%AF/"/>
    
    
      <category term="tempfile" scheme="http://quiryrain.tk/tags/tempfile/"/>
    
      <category term="临时文件" scheme="http://quiryrain.tk/tags/%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>OSPath的用法</title>
    <link href="http://quiryrain.tk/OS-Path/"/>
    <id>http://quiryrain.tk/OS-Path/</id>
    <published>2019-02-25T07:37:52.000Z</published>
    <updated>2019-03-05T13:32:48.679Z</updated>
    
    <content type="html"><![CDATA[<h3 id="OS-path模块中的部分函数的介绍"><a href="#OS-path模块中的部分函数的介绍" class="headerlink" title="OS.path模块中的部分函数的介绍"></a>OS.path模块中的部分函数的介绍</h3><ul><li>os.path.abspath(path) #返回绝对路径</li><li>os.path.basename(path) #返回文件名</li><li>os.path.commonprefix(list) #返回list(多个路径)中，所有path共有的最长的路径。</li><li>os.path.dirname(path) #返回文件路径</li><li>os.path.exists(path) #路径存在则返回True,路径损坏返回False</li><li>os.path.lexists #路径存在则返回True,路径损坏也返回True</li><li>os.path.expanduser(path) #把path中包含的”~”和”~user”转换成用户目录</li><li>os.path.expandvars(path) #根据环境变量的值替换path中包含的”$name”和”${name}”</li><li>os.path.getatime(path) #返回最后一次进入此path的时间。</li><li>os.path.getmtime(path) #返回在此path下最后一次修改的时间。</li><li>os.path.getctime(path) #返回path的大小</li><li>os.path.getsize(path) #返回文件大小，如果文件不存在就返回错误</li><li>os.path.isabs(path) #判断是否为绝对路径</li><li>os.path.isfile(path) #判断路径是否为文件</li><li>os.path.isdir(path) #判断路径是否为目录</li><li>os.path.islink(path) #判断路径是否为链接</li><li>os.path.ismount(path) #判断路径是否为挂载点（）</li><li>os.path.join(path1[, path2[, …]]) #把目录和文件名合成一个路径</li><li>os.path.normcase(path) #转换path的大小写和斜杠</li><li>os.path.normpath(path) #规范path字符串形式</li><li>os.path.realpath(path) #返回path的真实路径</li><li>os.path.relpath(path[, start]) #从start开始计算相对路径</li><li>os.path.samefile(path1, path2) #判断目录或文件是否相同</li><li>os.path.sameopenfile(fp1, fp2) #判断fp1和fp2是否指向同一文件</li><li>os.path.samestat(stat1, stat2) #判断stat tuple stat1和stat2是否指向同一个文件</li><li>os.path.split(path) #把路径分割成dirname和basename，返回一个元组</li><li>os.path.splitdrive(path) #一般用在windows下，返回驱动器名和路径组成的元组</li><li>os.path.splitext(path) #分割路径，返回路径名和文件扩展名的元组</li><li>os.path.splitunc(path) #把路径分割为加载点与文件</li><li>os.path.walk(path, visit, arg) #遍历path，进入每个目录都调用visit函数，visit函数必须有3个参数(arg, dirname, names)，dirname表示当前目录的目录名，names代表当前目录下的所有文件名，args则为walk的第三个参数</li><li>os.path.supports_unicode_filenames #设置是否支持unicode路径名</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;OS-path模块中的部分函数的介绍&quot;&gt;&lt;a href=&quot;#OS-path模块中的部分函数的介绍&quot; class=&quot;headerlink&quot; title=&quot;OS.path模块中的部分函数的介绍&quot;&gt;&lt;/a&gt;OS.path模块中的部分函数的介绍&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
      
    
    </summary>
    
      <category term="Python后端" scheme="http://quiryrain.tk/categories/Python%E5%90%8E%E7%AB%AF/"/>
    
    
      <category term="os模块" scheme="http://quiryrain.tk/tags/os%E6%A8%A1%E5%9D%97/"/>
    
      <category term="path的用法" scheme="http://quiryrain.tk/tags/path%E7%9A%84%E7%94%A8%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>FTP Module</title>
    <link href="http://quiryrain.tk/FTP-Module/"/>
    <id>http://quiryrain.tk/FTP-Module/</id>
    <published>2019-02-25T07:32:32.000Z</published>
    <updated>2019-03-05T13:32:48.678Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ftplib模块的用法"><a href="#ftplib模块的用法" class="headerlink" title="ftplib模块的用法"></a>ftplib模块的用法</h3><ul><li>login(user=’’,passwd=’’, acct=’’) 登录到FTP 服务器，所有的参数都是可选的</li><li>pwd() 当前工作目录</li><li>cwd(path) 把当前工作目录设置为path</li><li>dir([path[,…[,cb]]) 显示path 目录里的内容，可选的参数cb 是一个回调函数，会被传给retrlines()方法</li><li>nlst([path[,…]) 与dir()类似，但返回一个文件名的列表，而不是显示这些文件名</li><li>retrlines(cmd [, cb]) 给定FTP 命令（如“RETR filename”），用于下载文本文件。可选的回调函数cb 用于处理文件的每一行</li><li>retrbinary(cmd, cb[,bs=8192[, ra]]) 与retrlines()类似，只是这个指令处理二进制文件。回调函数cb 用于处理每一块（块大小默认为8K）下载的数据。</li><li>storlines(cmd, f) 给定FTP 命令（如“STOR filename”），以上传文本文件。要给定一个文件对象f</li><li>storbinary(cmd, f[,bs=8192]) 与storlines()类似，只是这个指令处理二进制文件。要给定一个文件对象f，上传块大小bs 默认为8Kbs=8192])</li><li>rename(old, new) 把远程文件old 改名为new</li><li>delete(path) 删除位于path 的远程文件</li><li>mkd(directory) 创建远程目录</li></ul><h3 id="此处给出官方给的介绍"><a href="#此处给出官方给的介绍" class="headerlink" title="此处给出官方给的介绍"></a>此处给出官方给的介绍</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Methods defined here:</span><br><span class="line">|</span><br><span class="line">| init(self, host=’’, user=’’, passwd=’’, acct=’’, keyfile=<span class="literal">None</span>, certfile=<span class="literal">None</span>, context=<span class="literal">None</span>, timeout=, source_address=<span class="literal">None</span>)</span><br><span class="line">|</span><br><span class="line">| auth(self)</span><br><span class="line">| Set up secure control connection by using TLS/SSL.</span><br><span class="line">|</span><br><span class="line">| login(self, user=’’, passwd=’’, acct=’’, secure=<span class="literal">True</span>)</span><br><span class="line">|</span><br><span class="line">| ntransfercmd(self, cmd, rest=<span class="literal">None</span>)</span><br><span class="line">|</span><br><span class="line">| prot_c(self)</span><br><span class="line">| Set up clear text data connection.</span><br><span class="line">|</span><br><span class="line">| prot_p(self)</span><br><span class="line">| Set up secure data connection.</span><br><span class="line">|</span><br><span class="line">| retrbinary(self, cmd, callback, blocksize=<span class="number">8192</span>, rest=<span class="literal">None</span>)</span><br><span class="line">|</span><br><span class="line">| retrlines(self, cmd, callback=<span class="literal">None</span>)</span><br><span class="line">|</span><br><span class="line">| storbinary(self, cmd, fp, blocksize=<span class="number">8192</span>, callback=<span class="literal">None</span>, rest=<span class="literal">None</span>)</span><br><span class="line">|</span><br><span class="line">| storlines(self, cmd, fp, callback=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;ftplib模块的用法&quot;&gt;&lt;a href=&quot;#ftplib模块的用法&quot; class=&quot;headerlink&quot; title=&quot;ftplib模块的用法&quot;&gt;&lt;/a&gt;ftplib模块的用法&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;login(user=’’,passwd=’’, acc
      
    
    </summary>
    
      <category term="Python后端" scheme="http://quiryrain.tk/categories/Python%E5%90%8E%E7%AB%AF/"/>
    
    
      <category term="ftp" scheme="http://quiryrain.tk/tags/ftp/"/>
    
  </entry>
  
  <entry>
    <title>BaseServer</title>
    <link href="http://quiryrain.tk/BaseServer/"/>
    <id>http://quiryrain.tk/BaseServer/</id>
    <published>2019-02-25T07:11:45.000Z</published>
    <updated>2019-03-05T13:32:48.678Z</updated>
    
    <content type="html"><![CDATA[<h3 id="服务器类型"><a href="#服务器类型" class="headerlink" title="服务器类型"></a>服务器类型</h3><blockquote><p>5种类型：BaseServer，TCPServer，UnixStreamServer，UDPServer，UnixDatagramServer。注意：BaseServer不直接对外服务。</p></blockquote><h3 id="服务器对象"><a href="#服务器对象" class="headerlink" title="服务器对象"></a>服务器对象</h3><ul><li>class SocketServer.BaseServer:这是模块中的所有服务器对象的超类。它定义了接口，如下所述，但是大多数的方法不实现，在子类中进行细化。</li><li>BaseServer.fileno():返回服务器监听套接字的整数文件描述符。通常用来传递给select.select(), 以允许一个进程监视多个服务器。</li><li>BaseServer.handle_request():处理单个请求。处理顺序:get_request(),verify_request(),process_request()。如果用户提供handle()方法抛出异常，将调用服务器的handle_error()方法。如果self.timeout内没有请求收到， 将调用handle_timeout()并返回handle_request()。</li><li>BaseServer.serve_forever(poll_interval=0.5):处理请求，直到一个明确的shutdown()请求。每poll_interval秒轮询一次shutdown。忽略self.timeout。如果你需要做周期性的任务，建议放置在其他线程。</li><li>BaseServer.shutdown():告诉serve_forever()循环停止并等待其停止。python2.6版本。</li><li>BaseServer.address_family::地址家族，比如socket.AF_INET和socket.AF_UNIX。</li><li>BaseServer.RequestHandlerClass:用户提供的请求处理类，这个类为每个请求创建实例。</li><li>BaseServer.server_address:服务器侦听的地址。格式根据协议家族地址的各不相同，请参阅socket模块的文档。</li><li>BaseServer.socketSocket:服务器上侦听传入的请求socket对象的服务器。</li></ul><h3 id="服务器类支持下面的类变量"><a href="#服务器类支持下面的类变量" class="headerlink" title="服务器类支持下面的类变量"></a>服务器类支持下面的类变量</h3><ul><li>BaseServer.allow_reuse_address：服务器是否允许地址的重用。默认为false ，并且可在子类中更改。</li><li>BaseServer.request_queue_size</li></ul><h3 id="请求队列的大小"><a href="#请求队列的大小" class="headerlink" title="请求队列的大小"></a>请求队列的大小</h3><p>如果单个请求需要很长的时间来处理，服务器忙时请求被放置到队列中，最多可以放request_queue_size个。一旦队列已满，来自客户端的请求将得到 “Connection denied”错误。默认值通常为5 ，但可以被子类覆盖。</p><ul><li>BaseServer.socket_type：服务器使用的套接字类型;socket.SOCK_STREAM和socket.SOCK_DGRAM等。</li><li>BaseServer.timeout：超时时间，以秒为单位，或 None表示没有超时。如果handle_request()在timeout内没有收到请求，将调用handle_timeout()。</li></ul><p>下面方法可以被子类重载，它们对服务器对象的外部用户没有影响。</p><ul><li>BaseServer.finish_request()：实际处理RequestHandlerClass发起的请求并调用其handle()方法。 常用。</li><li>BaseServer.get_request()：接受socket请求，并返回二元组包含要用于与客户端通信的新socket对象，以及客户端的地址。</li><li>BaseServer.handle_error(request, client_address)：如果RequestHandlerClass的handle()方法抛出异常时调用。默认操作是打印traceback到标准输出，并继续处理其他请求。</li><li>BaseServer.handle_timeout()：超时处理。默认对于forking服务器是收集退出的子进程状态，threading服务器则什么都不做。</li><li>BaseServer.process_request(request, client_address) :调用finish_request()创建RequestHandlerClass的实例。如果需要，此功能可以创建新的进程或线程来处理请求,ForkingMixIn和ThreadingMixIn类做到这点。常用。</li><li>BaseServer.server_activate()：通过服务器的构造函数来激活服务器。默认的行为只是监听服务器套接字。可重载。</li><li>BaseServer.server_bind()：通过服务器的构造函数中调用绑定socket到所需的地址。可重载。</li><li>BaseServer.verify_request(request, client_address)：返回一个布尔值，如果该值为True ，则该请求将被处理，反之请求将被拒绝。此功能可以重写来实现对服务器的访问控制。默认的实现始终返回True。client_address可以限定客户端，比如只处理指定ip区间的请求。 常用。</li></ul><h3 id="请求处理器"><a href="#请求处理器" class="headerlink" title="请求处理器"></a>请求处理器</h3><p>处理器接收数据并决定如何操作。它负责在socket层之上实现协议（i.e., HTTP, XML-RPC, or AMQP)，读取数据，处理并写反应。可以重载的方法如下：</p><ul><li>setup():准备请求处理. 默认什么都不做，StreamRequestHandler中会创建文件类似的对象以读写socket.</li><li>handle():处理请求。解析传入的请求，处理数据，并发送响应。默认什么都不做。常用变量：self.request，self.client_address，self.server。</li><li>finish():环境清理。默认什么都不做，如果setup产生异常，不会执行finish。</li></ul><p>通常只需要重载handle,self.request的类型和数据报或流的服务不同。</p><ul><li>对于流服务，self.request是socket 对象；</li><li>对于数据报服务，self.request是字符串和socket。可以在子类StreamRequestHandler或 DatagramRequestHandler中重载，重写setup()和finish(),并提供self.rfile和self.wfile属性。self.rfile和self.wfile可以读取或写入，以获得请求数据或将数据返回到客户端。</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;服务器类型&quot;&gt;&lt;a href=&quot;#服务器类型&quot; class=&quot;headerlink&quot; title=&quot;服务器类型&quot;&gt;&lt;/a&gt;服务器类型&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;5种类型：BaseServer，TCPServer，UnixStreamServer，UD
      
    
    </summary>
    
      <category term="Python后端" scheme="http://quiryrain.tk/categories/Python%E5%90%8E%E7%AB%AF/"/>
    
    
      <category term="base server" scheme="http://quiryrain.tk/tags/base-server/"/>
    
  </entry>
  
</feed>
